<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="content-type" content="text/html; charset=utf-8" />
                <meta property="wb:webmaster" content="397a4c282ef1bdba" />
		<meta name="description" content="python正则表达式：re.sub | 技术改变世界">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
		<title>python正则表达式：re.sub</title>
		<!--[if lte IE 9]><meta http-equiv="refresh" content="0;url=/assets/ie.html"><![endif]-->
		<link rel="shortcut icon" href="/assets/images/favicon.ico" />
		<link rel="stylesheet" type="text/css" href="/assets/stylesheets/style.css">
		<script type="text/javascript">
			var _gaq = _gaq || [];
			_gaq.push(['_setAccount', 'UA-45407331-1']);
			_gaq.push(['_trackPageview']);
			(function() {
				var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
				ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
				var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	"		})();
		</script>
		<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
		<script type="text/x-mathjax-config">
        MathJax.Hub.Config({
        TeX: {equationNumbers: {autoNumber: ["AMS"], useLabelIds: true}},
        "HTML-CSS": {linebreaks: {automatic: true}},
        SVG: {linebreaks: {automatic: true}}
        });
        </script>
        <script type="text/javascript" src="/assets/js/jquery.js"></script>
		<script type="text/javascript" src="/assets/js/jquery.pjax.js"></script>
		<script type="text/javascript" src="/assets/js/script.js"></script>
		<script type="text/javascript" src="/assets/js/pdfobject.js"></script>
		<script type = "text/javascript">
		$(document).ready(function(){
		$("#random").on('click','img',function(){
			$.get("sitemap.xml",function(data){
			var $xml=$(data);
			url=$xml.find("url");
			n = url.size();
			n = getRandom(n);
			position=url.get(n);  
			hello=position.getElementsByTagName("loc")[0].firstChild.nodeValue; 
			location.href=hello;
		})
    
	})
  //随机数发生器
       function getRandom(n){return Math.floor(Math.random()*(n+1))}
})
	</script>
		
	</head>
	<body>
		<nav id="nav">
		    <a id="random" href="#"><img id="profile" src="/assets/images/profile.png" alt="" height="100" width="100"></a>
			<ul id="menu">
				<li id="label1" class="label selected"><span>最新文章</span></li>
				<li id="label2" class="label"><span>机器学习</span></li>
				<li id="label3" class="label"><span>数据可视化</span></li>
				<li id="label4" class="label"><span>数据挖掘</span></li>
				<li id="label5" class="label"><span>其他技术</span></li>
				<li id="label6" class="label"><span>生活随笔</span></li>
				<a id="about" href="/index.html">关于我</a>
			</ul>

		</nav>

		<aside id="sidebar">
			<div id="title_wrap" class="select1">
				<h2 id="title1" class="title">最新文章</h2>
				<h2 id="title2" class="title">机器学习</h2>
				<h2 id="title3" class="title">数据可视化</h2>
				<h2 id="title4" class="title">数据挖掘</h2>
				<h2 id="title5" class="title">其他技术</h2>
				<h2 id="title6" class="title">生活随笔</h2>
			</div>

			<div id="post_list">
			
				<a class="related cate1" href="/2014/03/pdf-insert"><span class="circle_icon"></span>内置pdf<span class="date">Mar 2014</span></a>
			
				<a class="related cate1" href="/2014/03/scrapy-xpath"><span class="circle_icon"></span>Scrapy中Xpath学习小结<span class="date">Mar 2014</span></a>
			
				<a class="related cate1" href="/2014/03/mathjax-github"><span class="circle_icon"></span>在Github中使用MathJax编辑公式<span class="date">Mar 2014</span></a>
			
				<a class="ml cate1" href="/2014/03/distance-similarity"><span class="circle_icon"></span>相似度和距离小结<span class="date">Mar 2014</span></a>
			
				<a class="datamining cate1" href="/2014/03/data-table"><span class="circle_icon"></span>SAC思想探索<span class="date">Mar 2014</span></a>
			
				<a class="datamining cate1" href="/2014/03/python-re-sub"><span class="circle_icon"></span>python正则表达式：re.sub<span class="date">Mar 2014</span></a>
			
				<a class="datamining cate1" href="/2014/03/python-regular-expression"><span class="circle_icon"></span>python正则表达式<span class="date">Mar 2014</span></a>
			
				<a class="datamining cate1" href="/2014/03/install-scrapy"><span class="circle_icon"></span>scrapy初探-安装和简单操作<span class="date">Mar 2014</span></a>
			
				<a class="datamining cate1" href="/2014/02/where-is-data"><span class="circle_icon"></span>数据都去哪儿了<span class="date">Feb 2014</span></a>
			
				<a class="related cate1" href="/2014/02/douban"><span class="circle_icon"></span>烟波至爽，数据为王<span class="date">Feb 2014</span></a>
			
				<a class="life cate1" href="/2013/12/happy-new-year"><span class="circle_icon"></span>Happy New Year<span class="date">Dec 2013</span></a>
			
				<a class="datavis cate1" href="/2013/11/ggplot2-2d-density"><span class="circle_icon"></span>ggplot2 - 二维数据密度图<span class="date">Nov 2013</span></a>
			
				<a class="datavis cate1" href="/2013/10/horizon-lattice-extra"><span class="circle_icon"></span>latticeExtra - Horizon Plot的简单实现<span class="date">Oct 2013</span></a>
			
				<a class="datavis cate1" href="/2013/10/horizon-plot"><span class="circle_icon"></span>Horizon Chart - 惊艳到爆的哲学<span class="date">Oct 2013</span></a>
			
				<a class="datavis cate1" href="/2013/09/Significance-ggplot2"><span class="circle_icon"></span>ggplot2 - 为拟合曲线加置信空间<span class="date">Sep 2013</span></a>
			
				<a class="life cate1" href="/2013/06/mj-memory"><span class="circle_icon"></span>再次纪念MJ<span class="date">Jun 2013</span></a>
			
				<a class="datamining cate1" href="/2013/06/plyr-advanced"><span class="circle_icon"></span>Plyr- 多因子整合<span class="date">Jun 2013</span></a>
			
				<a class="datavis cate1" href="/2013/05/stack-area-ggplot2"><span class="circle_icon"></span>ggplot2 - Stacked Area Graph<span class="date">May 2013</span></a>
			
				<a class="related cate1" href="/2013/05/Sublime-text-2"><span class="circle_icon"></span>Sublime Text 2学习过程<span class="date">May 2013</span></a>
			
				<a class="ml cate1" href="/2013/04/mahout-big-data"><span class="circle_icon"></span>Mahout简单部署备忘<span class="date">Apr 2013</span></a>
			
				<a class="datavis cate1" href="/2013/04/Wilkinson-Dot-Plot"><span class="circle_icon"></span>ggplot2 - Wilkinson Dot Plot<span class="date">Apr 2013</span></a>
			
				<a class="datavis cate1" href="/2013/04/heat-map"><span class="circle_icon"></span>ggplot2 - Heat Map<span class="date">Apr 2013</span></a>
			
				<a class="datavis cate1" href="/2013/04/cleveland-Dotplot"><span class="circle_icon"></span>ggplot2 - Cleveland Dot Plot<span class="date">Apr 2013</span></a>
			
				<a class="datavis cate1" href="/2013/04/ggplot2-line-graph"><span class="circle_icon"></span>ggplot2 - Line Graph<span class="date">Apr 2013</span></a>
			
				<a class="datamining cate1" href="/2013/03/plyr-dataming"><span class="circle_icon"></span>Plyr- 数据整合利器<span class="date">Mar 2013</span></a>
			
				<a class="datavis cate1" href="/2013/02/ggplot2-histogram"><span class="circle_icon"></span>ggplot2 - Histogram<span class="date">Feb 2013</span></a>
			
				<a class="datamining cate1" href="/2013/02/reshape-advanced"><span class="circle_icon"></span>R - Reshape Package II<span class="date">Feb 2013</span></a>
			
				<a class="datamining cate1" href="/2013/02/reshape-basic"><span class="circle_icon"></span>R - Reshape2 Package<span class="date">Feb 2013</span></a>
			
				<a class="related cate1" href="/2013/02/hadoop-hive"><span class="circle_icon"></span>大数据体验之Hadoop, Rhadoop, 和Hive<span class="date">Feb 2013</span></a>
			
				<a class="datavis cate1" href="/2013/02/ggplot2-bar-chart"><span class="circle_icon"></span>ggplot2 - Barchart<span class="date">Feb 2013</span></a>
			
				<a class="datavis cate1" href="/2013/01/intro-ggplot2"><span class="circle_icon"></span>ggplot2 - 作图哲学<span class="date">Jan 2013</span></a>
			
				<a class="datavis cate1" href="/2013/01/welcome-ggplot2"><span class="circle_icon"></span>ggplot2 - Welcome!<span class="date">Jan 2013</span></a>
			
				<a class="life cate1" href="/2012/08/story-vision"><span class="circle_icon"></span>自己的视角，别人的故事<span class="date">Aug 2012</span></a>
			
				<a class="life cate1" href="/2012/06/memorize-michael-jackson"><span class="circle_icon"></span>纪念 Michael Jackson - This Is It<span class="date">Jun 2012</span></a>
			
				<a class="life cate1" href="/2012/06/happy-madives"><span class="circle_icon"></span>传说中的马尔代夫<span class="date">Jun 2012</span></a>
			
				<a class="life cate1" href="/2011/03/japan-earthquake"><span class="circle_icon"></span>日本地震杂想<span class="date">Mar 2011</span></a>
			
			</div>
		</aside>

		<div id="container">
			<div id="pjax">
				
				<article id="post">
	<header id="header">
		<h1 id="identifier">python正则表达式：re.sub</h1>
		<button id="fullscreen" class="header_icon"></button>
		<button id="fontsize" class="header_icon"></button>
	</header>
	<div id="content">
		<p>re.sub很强大，所以导致用法稍微有点复杂。所以当遇到稍微复杂的用法时候，就容易犯错。</p>

<p>所以此处，总结一下，在使用re.sub的时候，需要注意的一些事情。</p>

<p>re.sub共有五个参数。</p>

<p>其中三个必选参数：pattern, repl, string</p>

<p>两个可选参数：count, flags</p>

<p>re.sub(pattern, repl, string, count=0, flags=0)
Return the string obtained by replacing the leftmost non-overlapping occurrences of pattern in string by the replacement repl. If the pattern isn’t found, string is returned unchanged. repl can be a string or a function; if it is a string, any backslash escapes in it are processed. That is, \n is converted to a single newline character, \r is converted to a carriage return, and so forth. Unknown escapes such as \j are left alone. Backreferences, such as \6, are replaced with the substring matched by group 6 in the pattern. For example:</p>

<div class="highlight"><pre><code class="python">    <span class="o">&gt;&gt;&gt;</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s">r&#39;def\s+([a-zA-Z_][a-zA-Z_0-9]*)\s*\(\s*\):&#39;</span><span class="p">,</span>
    <span class="o">...</span>        <span class="s">r&#39;static PyObject*\npy_\1(void)\n{&#39;</span><span class="p">,</span>
    <span class="o">...</span>        <span class="s">&#39;def myfunc():&#39;</span><span class="p">)</span>
<span class="s">&#39;static PyObject*</span><span class="se">\n</span><span class="s">py_myfunc(void)</span><span class="se">\n</span><span class="s">{&#39;</span>
</code></pre></div>

<p>If repl is a function, it is called for every non-overlapping occurrence of pattern. The function takes a single match object argument, and returns the replacement string. For example:</p>

<div class="highlight"><pre><code class="python"><span class="o">&gt;&gt;&gt;</span> <span class="k">def</span> <span class="nf">dashrepl</span><span class="p">(</span><span class="n">matchobj</span><span class="p">):</span>
<span class="o">...</span>     <span class="k">if</span> <span class="n">matchobj</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">==</span> <span class="s">&#39;-&#39;</span><span class="p">:</span> <span class="k">return</span> <span class="s">&#39; &#39;</span>
<span class="o">...</span>     <span class="k">else</span><span class="p">:</span> <span class="k">return</span> <span class="s">&#39;-&#39;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s">&#39;-{1,2}&#39;</span><span class="p">,</span> <span class="n">dashrepl</span><span class="p">,</span> <span class="s">&#39;pro----gram-files&#39;</span><span class="p">)</span>
<span class="s">&#39;pro--gram files&#39;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s">r&#39;\sAND\s&#39;</span><span class="p">,</span> <span class="s">&#39; &amp; &#39;</span><span class="p">,</span> <span class="s">&#39;Baked Beans And Spam&#39;</span><span class="p">,</span> <span class="n">flags</span><span class="o">=</span><span class="n">re</span><span class="o">.</span><span class="n">IGNORECASE</span><span class="p">)</span>
<span class="s">&#39;Baked Beans &amp; Spam&#39;</span>
</code></pre></div>

<p>The pattern may be a string or an RE object.
The optional argument count is the maximum number of pattern occurrences to be replaced; count must be a non-negative integer. If omitted or zero, all occurrences will be replaced. Empty matches for the pattern are replaced only when not adjacent to a previous match, so sub(‘x*’, ‘-‘, ‘abc’) returns ‘-a-b-c-‘.
In addition to character escapes and backreferences as described above, \g<name> will use the substring matched by the group named name, as defined by the (?P<name>...) syntax. \g<number> uses the corresponding group number; \g&lt;2&gt; is therefore equivalent to \2, but isn’t ambiguous in a replacement such as \g&lt;2&gt;0. \20 would be interpreted as a reference to group 20, not a reference to group 2 followed by the literal character '0'. The backreference \g&lt;0&gt; substitutes in the entire substring matched by the RE.</number></name></name></p>

<p>下面详细介绍一下这5个参数的基本配置</p>

<p><strong>第一个参数：pattern</strong></p>

<p>pattern，表示正则中的模式字符串，这个没太多要解释的。</p>

<p>需要知道的是：</p>

<p>反斜杠加数字（\N），则对应着匹配的组（matched group）</p>

<ul>
  <li>比如\6，表示匹配前面pattern中的第6个group</li>
  <li>意味着，pattern中，前面肯定是存在对应的，第6个group，然后你后面也才能去引用</li>
</ul>

<p>比如，想要处理：</p>

<blockquote>
  <p>hello 
, nihao crifan</p>
</blockquote>

<p>且此处的，前后的crifan，肯定是一样的。</p>

<p>而想要把整个这样的字符串，换成crifanli</p>

<p>则就可以这样的re.sub实现替换：</p>

<div class="highlight"><pre><code class="python"><span class="n">inputStr</span> <span class="o">=</span> <span class="s">&quot;hello crifan, nihao crifan&quot;</span><span class="p">;</span>
<span class="n">replacedStr</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s">r&quot;hello (\w+), nihao \1&quot;</span><span class="p">,</span> <span class="s">&quot;crifanli&quot;</span><span class="p">,</span> <span class="n">inputStr</span><span class="p">);</span>
<span class="k">print</span> <span class="s">&quot;replacedStr=&quot;</span><span class="p">,</span><span class="n">replacedStr</span><span class="p">;</span> <span class="c">#crifanli</span>
</code></pre></div>

<p><strong>第二个参数：repl</strong></p>

<p>repl，就是replacement，被替换，的字符串的意思。</p>

<p>repl可以是字符串，也可以是函数。</p>

<p>如果repl是字符串的话，其中的任何反斜杠转义字符，都会被处理的。</p>

<p>即：</p>

<ul>
  <li>\n：会被处理为对应的换行符；</li>
  <li>\r：会被处理为回车符；
其他不能识别的转移字符，则只是被识别为普通的字符：
比如\j，会被处理为j这个字母本身；</li>
  <li>反斜杠加g以及中括号内一个名字，即：\g<name>，对应着命了名的组，named group
接着上面的举例：</name></li>
</ul>

<p>想要把对应的：</p>

<blockquote>
  <p>hello crifan, nihao crifan</p>
</blockquote>

<p>中的crifan提取出来，只剩：</p>

<blockquote>
  <p>crifan</p>
</blockquote>

<p>就可以写成：</p>

<div class="highlight"><pre><code class="python"><span class="n">inputStr</span> <span class="o">=</span> <span class="s">&quot;hello crifan, nihao crifan&quot;</span><span class="p">;</span>
<span class="n">replacedStr</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s">r&quot;hello (\w+), nihao \1&quot;</span><span class="p">,</span> <span class="s">&quot;\g&lt;1&gt;&quot;</span><span class="p">,</span> <span class="n">inputStr</span><span class="p">);</span>
<span class="k">print</span> <span class="s">&quot;replacedStr=&quot;</span><span class="p">,</span><span class="n">replacedStr</span><span class="p">;</span> <span class="c">#crifan</span>
</code></pre></div>

<p>对应的带命名的组（named group）的版本是：</p>

<div class="highlight"><pre><code class="python"><span class="n">inputStr</span> <span class="o">=</span> <span class="s">&quot;hello crifan, nihao crifan&quot;</span><span class="p">;</span>
<span class="n">replacedStr</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s">r&quot;hello (?P&lt;name&gt;\w+), nihao (?P=name)&quot;</span><span class="p">,</span> <span class="s">&quot;\g&lt;name&gt;&quot;</span><span class="p">,</span> <span class="n">inputStr</span><span class="p">);</span>
<span class="k">print</span> <span class="s">&quot;replacedStr=&quot;</span><span class="p">,</span><span class="n">replacedStr</span><span class="p">;</span> <span class="c">#crifan</span>
</code></pre></div>

<p>当然repl也可以是函数</p>

<p>举例说明：</p>

<p>比如输入内容是：</p>

<blockquote>
  <p>hello 123 world 456</p>
</blockquote>

<p>想要把其中的数字部分，都加上111，变成：</p>

<blockquote>
  <p>hello 234 world 567</p>
</blockquote>

<p>那么就可以写成：</p>

<div class="highlight"><pre><code class="python"><span class="c">#!/usr/bin/python</span>
<span class="c"># -*- coding: utf-8 -*-</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Function:</span>
<span class="sd">【整理】详解Python中re.sub</span>
<span class="sd"> </span>
<span class="sd">&quot;&quot;&quot;</span>
 
<span class="kn">import</span> <span class="nn">re</span><span class="p">;</span>
 
<span class="k">def</span> <span class="nf">pythonReSubDemo</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        demo Pyton re.sub</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">inputStr</span> <span class="o">=</span> <span class="s">&quot;hello 123 world 456&quot;</span><span class="p">;</span>
     
    <span class="k">def</span> <span class="nf">_add111</span><span class="p">(</span><span class="n">matched</span><span class="p">):</span>
        <span class="n">intStr</span> <span class="o">=</span> <span class="n">matched</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="s">&quot;number&quot;</span><span class="p">);</span> <span class="c">#123</span>
        <span class="n">intValue</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">intStr</span><span class="p">);</span>
        <span class="n">addedValue</span> <span class="o">=</span> <span class="n">intValue</span> <span class="o">+</span> <span class="mi">111</span><span class="p">;</span> <span class="c">#234</span>
        <span class="n">addedValueStr</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">addedValue</span><span class="p">);</span>
        <span class="k">return</span> <span class="n">addedValueStr</span><span class="p">;</span>
         
    <span class="n">replacedStr</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s">&quot;(?P&lt;number&gt;\d+)&quot;</span><span class="p">,</span> <span class="n">_add111</span><span class="p">,</span> <span class="n">inputStr</span><span class="p">);</span>
    <span class="k">print</span> <span class="s">&quot;replacedStr=&quot;</span><span class="p">,</span><span class="n">replacedStr</span><span class="p">;</span> <span class="c">#hello 234 world 567</span>
 
<span class="c">###############################################################################</span>
<span class="k">if</span> <span class="n">__name__</span><span class="o">==</span><span class="s">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">pythonReSubDemo</span><span class="p">();</span>
</code></pre></div>

<p><strong>第三个参数：string</strong></p>

<p>string，即表示要被处理，要被替换的那个string字符串。</p>

<p>没什么特殊要说明。</p>

<p><strong>第四个参数：count</strong></p>

<p>举例说明：</p>

<p>继续之前的例子，假如对于匹配到的内容，只处理其中一部分。</p>

<p>比如对于：</p>

<blockquote>
  <p>hello 123 world 456 nihao 789</p>
</blockquote>

<p>只是像要处理前面两个数字：123,456，分别给他们加111，而不处理789，</p>

<p>那么就可以写成：</p>

<div class="highlight"><pre><code class="python"><span class="c">#!/usr/bin/python</span>
<span class="c"># -*- coding: utf-8 -*-</span>
<span class="kn">import</span> <span class="nn">re</span><span class="p">;</span>
 
<span class="k">def</span> <span class="nf">pythonReSubDemo</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        demo Pyton re.sub</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">inputStr</span> <span class="o">=</span> <span class="s">&quot;hello 123 world 456 nihao 789&quot;</span><span class="p">;</span>
     
    <span class="k">def</span> <span class="nf">_add111</span><span class="p">(</span><span class="n">matched</span><span class="p">):</span>
        <span class="n">intStr</span> <span class="o">=</span> <span class="n">matched</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="s">&quot;number&quot;</span><span class="p">);</span> <span class="c">#123</span>
        <span class="n">intValue</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">intStr</span><span class="p">);</span>
        <span class="n">addedValue</span> <span class="o">=</span> <span class="n">intValue</span> <span class="o">+</span> <span class="mi">111</span><span class="p">;</span> <span class="c">#234</span>
        <span class="n">addedValueStr</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">addedValue</span><span class="p">);</span>
        <span class="k">return</span> <span class="n">addedValueStr</span><span class="p">;</span>
         
    <span class="n">replacedStr</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s">&quot;(?P&lt;number&gt;\d+)&quot;</span><span class="p">,</span> <span class="n">_add111</span><span class="p">,</span> <span class="n">inputStr</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
    <span class="k">print</span> <span class="s">&quot;replacedStr=&quot;</span><span class="p">,</span><span class="n">replacedStr</span><span class="p">;</span> <span class="c">#hello 234 world 567 nihao 789</span>
 
<span class="c">###############################################################################</span>
<span class="k">if</span> <span class="n">__name__</span><span class="o">==</span><span class="s">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">pythonReSubDemo</span><span class="p">();</span>
</code></pre></div>

<p><strong>第五个参数：flags</strong>
此处没有什么可以特别讲的</p>

<p>要注意，被替换的字符串，即参数repl，是普通的字符串，不是pattern</p>

<div class="highlight"><pre><code class="python"><span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span> <span class="n">repl</span><span class="p">,</span> <span class="n">string</span><span class="p">,</span> <span class="n">count</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">flags</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</code></pre></div>

<p>即，对应的第二个参数是repl。</p>

<p>需要你指定对应的r前缀，才是pattern：</p>

<p>r”xxxx”</p>

<p>不要误把第四个参数flag的值，传递到第三个参数count中了
遇到的问题：</p>

<p>当传递第三个参数，原以为是flag的值是，</p>

<p>结果实际上是count的值</p>

<p>所以导致re.sub不功能，</p>

<p>所以要参数指定清楚了：</p>

<div class="highlight"><pre><code class="python"><span class="n">replacedStr</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="n">replacePattern</span><span class="p">,</span> <span class="n">orignialStr</span><span class="p">,</span> <span class="n">replacedPartStr</span><span class="p">,</span> <span class="n">flags</span><span class="o">=</span><span class="n">re</span><span class="o">.</span><span class="n">I</span><span class="p">);</span> <span class="c"># can omit count parameter</span>
</code></pre></div>

<p>或者：</p>

<div class="highlight"><pre><code class="python"><span class="n">replacedStr</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="n">replacePattern</span><span class="p">,</span> <span class="n">orignialStr</span><span class="p">,</span> <span class="n">replacedPartStr</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">I</span><span class="p">);</span> <span class="c"># must designate count parameter</span>
</code></pre></div>

<p>才可以正常工作。</p>

<h2 id="section">延伸阅读：</h2>
<p><a href="http://www.crifan.com/python_re_sub_detailed_introduction/">详解Python中的re.sub</a></p>

		
		<div id="donation">
		<b><a href="https://me.alipay.com/bigchao"></a>请我喝一杯</b>
		</div>
		<div id="social">
		    <a id="weibo" href="http://v.t.sina.com.cn/share/share.php?url=http://yangchao.me/2014/03/python-re-sub&title=python正则表达式：re.sub"></a>
			<a id="twitter" href="https://twitter.com/intent/tweet?url=http://yangchao.me/2014/03/python-re-sub&text=python正则表达式：re.sub"></a>
			<a id="end_cc" href="http://creativecommons.org/licenses/by-nc-sa/3.0/cn/"></a>
		</div>
	</div>
</article>

<div id="disqus_thread"></div>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink" target="_blank">Loading Disqus comments...</a>



			</div>
		</div>

		<div id="notice">左右滑动</div>
		
		
		
		
	</body>
</html>
