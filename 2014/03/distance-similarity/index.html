<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="content-type" content="text/html; charset=utf-8" />
                <meta property="wb:webmaster" content="397a4c282ef1bdba" />
		<meta name="description" content="相似度和距离小结 | 技术改变世界">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
		<title>相似度和距离小结</title>
		<!--[if lte IE 9]><meta http-equiv="refresh" content="0;url=/assets/ie.html"><![endif]-->
		<link rel="shortcut icon" href="/assets/images/favicon.ico" />
		<link rel="stylesheet" type="text/css" href="/assets/stylesheets/style.css">
		<script type="text/javascript">
			var _gaq = _gaq || [];
			_gaq.push(['_setAccount', 'UA-45407331-1']);
			_gaq.push(['_trackPageview']);
			(function() {
				var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
				ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
				var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	"		})();
		</script>
		<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
		<script type="text/x-mathjax-config">
        MathJax.Hub.Config({
        TeX: {equationNumbers: {autoNumber: ["AMS"], useLabelIds: true}},
        "HTML-CSS": {linebreaks: {automatic: true}},
        SVG: {linebreaks: {automatic: true}}
        });
        </script>
        <script type="text/javascript" src="/assets/js/jquery.js"></script>
		<script type="text/javascript" src="/assets/js/jquery.pjax.js"></script>
		<script type="text/javascript" src="/assets/js/script.js"></script>
		<script type="text/javascript" src="/assets/js/pdfobject.js"></script>
		<script type = "text/javascript">
		$(document).ready(function(){
		$("#random").on('click','img',function(){
			$.get("sitemap.xml",function(data){
			var $xml=$(data);
			url=$xml.find("url");
			n = url.size();
			n = getRandom(n);
			position=url.get(n);  
			hello=position.getElementsByTagName("loc")[0].firstChild.nodeValue; 
			location.href=hello;
		})
    
	})
  //随机数发生器
       function getRandom(n){return Math.floor(Math.random()*(n+1))}
})
	</script>
		
	</head>
	<body>
		<nav id="nav">
		    <a id="random" href="#"><img id="profile" src="/assets/images/profile.png" alt="" height="100" width="100"></a>
			<ul id="menu">
				<li id="label1" class="label selected"><span>最新文章</span></li>
				<li id="label2" class="label"><span>机器学习</span></li>
				<li id="label3" class="label"><span>数据可视化</span></li>
				<li id="label4" class="label"><span>数据挖掘</span></li>
				<li id="label5" class="label"><span>其他技术</span></li>
				<li id="label6" class="label"><span>生活随笔</span></li>
				<a id="about" href="/index.html">关于我</a>
			</ul>

		</nav>

		<aside id="sidebar">
			<div id="title_wrap" class="select1">
				<h2 id="title1" class="title">最新文章</h2>
				<h2 id="title2" class="title">机器学习</h2>
				<h2 id="title3" class="title">数据可视化</h2>
				<h2 id="title4" class="title">数据挖掘</h2>
				<h2 id="title5" class="title">其他技术</h2>
				<h2 id="title6" class="title">生活随笔</h2>
			</div>

			<div id="post_list">
			
				<a class="datamining cate1" href="/2014/03/tmall-algorithm"><span class="circle_icon"></span>天猫推荐算法比赛<span class="date">Mar 2014</span></a>
			
				<a class="related cate1" href="/2014/03/pdf-insert"><span class="circle_icon"></span>在网页中内置pdf文件<span class="date">Mar 2014</span></a>
			
				<a class="datamining cate1" href="/2014/03/datatble-filter-column"><span class="circle_icon"></span>data.table-案例学习-筛选各列特殊值<span class="date">Mar 2014</span></a>
			
				<a class="datamining cate1" href="/2014/03/datatable-faq"><span class="circle_icon"></span>data.table-案例学习-按条件筛选<span class="date">Mar 2014</span></a>
			
				<a class="related cate1" href="/2014/03/scrapy-xpath"><span class="circle_icon"></span>Scrapy中Xpath学习小结<span class="date">Mar 2014</span></a>
			
				<a class="related cate1" href="/2014/03/mathjax-github"><span class="circle_icon"></span>在Github中使用MathJax编辑公式<span class="date">Mar 2014</span></a>
			
				<a class="ml cate1" href="/2014/03/distance-similarity"><span class="circle_icon"></span>相似度和距离小结<span class="date">Mar 2014</span></a>
			
				<a class="datamining cate1" href="/2014/03/data-table"><span class="circle_icon"></span>SAC思想探索<span class="date">Mar 2014</span></a>
			
				<a class="datamining cate1" href="/2014/03/python-re-sub"><span class="circle_icon"></span>python正则表达式：re.sub<span class="date">Mar 2014</span></a>
			
				<a class="datamining cate1" href="/2014/03/python-regular-expression"><span class="circle_icon"></span>python正则表达式<span class="date">Mar 2014</span></a>
			
				<a class="datamining cate1" href="/2014/03/install-scrapy"><span class="circle_icon"></span>scrapy初探-安装和简单操作<span class="date">Mar 2014</span></a>
			
				<a class="datamining cate1" href="/2014/02/where-is-data"><span class="circle_icon"></span>数据都去哪儿了<span class="date">Feb 2014</span></a>
			
				<a class="related cate1" href="/2014/02/douban"><span class="circle_icon"></span>烟波至爽，数据为王<span class="date">Feb 2014</span></a>
			
				<a class="life cate1" href="/2013/12/happy-new-year"><span class="circle_icon"></span>Happy New Year<span class="date">Dec 2013</span></a>
			
				<a class="datavis cate1" href="/2013/11/ggplot2-2d-density"><span class="circle_icon"></span>ggplot2 - 二维数据密度图<span class="date">Nov 2013</span></a>
			
				<a class="datavis cate1" href="/2013/10/horizon-lattice-extra"><span class="circle_icon"></span>latticeExtra - Horizon Plot的简单实现<span class="date">Oct 2013</span></a>
			
				<a class="datavis cate1" href="/2013/10/horizon-plot"><span class="circle_icon"></span>Horizon Chart - 惊艳到爆的哲学<span class="date">Oct 2013</span></a>
			
				<a class="datavis cate1" href="/2013/09/Significance-ggplot2"><span class="circle_icon"></span>ggplot2 - 为拟合曲线加置信空间<span class="date">Sep 2013</span></a>
			
				<a class="life cate1" href="/2013/06/mj-memory"><span class="circle_icon"></span>再次纪念MJ<span class="date">Jun 2013</span></a>
			
				<a class="datamining cate1" href="/2013/06/plyr-advanced"><span class="circle_icon"></span>Plyr- 多因子整合<span class="date">Jun 2013</span></a>
			
				<a class="datavis cate1" href="/2013/05/stack-area-ggplot2"><span class="circle_icon"></span>ggplot2 - Stacked Area Graph<span class="date">May 2013</span></a>
			
				<a class="related cate1" href="/2013/05/Sublime-text-2"><span class="circle_icon"></span>Sublime Text 2学习过程<span class="date">May 2013</span></a>
			
				<a class="ml cate1" href="/2013/04/mahout-big-data"><span class="circle_icon"></span>Mahout简单部署备忘<span class="date">Apr 2013</span></a>
			
				<a class="datavis cate1" href="/2013/04/Wilkinson-Dot-Plot"><span class="circle_icon"></span>ggplot2 - Wilkinson Dot Plot<span class="date">Apr 2013</span></a>
			
				<a class="datavis cate1" href="/2013/04/heat-map"><span class="circle_icon"></span>ggplot2 - Heat Map<span class="date">Apr 2013</span></a>
			
				<a class="datavis cate1" href="/2013/04/cleveland-Dotplot"><span class="circle_icon"></span>ggplot2 - Cleveland Dot Plot<span class="date">Apr 2013</span></a>
			
				<a class="datavis cate1" href="/2013/04/ggplot2-line-graph"><span class="circle_icon"></span>ggplot2 - Line Graph<span class="date">Apr 2013</span></a>
			
				<a class="datamining cate1" href="/2013/03/plyr-dataming"><span class="circle_icon"></span>Plyr- 数据整合利器<span class="date">Mar 2013</span></a>
			
				<a class="datavis cate1" href="/2013/02/ggplot2-histogram"><span class="circle_icon"></span>ggplot2 - Histogram<span class="date">Feb 2013</span></a>
			
				<a class="datamining cate1" href="/2013/02/reshape-advanced"><span class="circle_icon"></span>R - Reshape Package II<span class="date">Feb 2013</span></a>
			
				<a class="datamining cate1" href="/2013/02/reshape-basic"><span class="circle_icon"></span>R - Reshape2 Package<span class="date">Feb 2013</span></a>
			
				<a class="related cate1" href="/2013/02/hadoop-hive"><span class="circle_icon"></span>大数据体验之Hadoop, Rhadoop, 和Hive<span class="date">Feb 2013</span></a>
			
				<a class="datavis cate1" href="/2013/02/ggplot2-bar-chart"><span class="circle_icon"></span>ggplot2 - Barchart<span class="date">Feb 2013</span></a>
			
				<a class="datavis cate1" href="/2013/01/intro-ggplot2"><span class="circle_icon"></span>ggplot2 - 作图哲学<span class="date">Jan 2013</span></a>
			
				<a class="datavis cate1" href="/2013/01/welcome-ggplot2"><span class="circle_icon"></span>ggplot2 - Welcome!<span class="date">Jan 2013</span></a>
			
				<a class="life cate1" href="/2012/08/story-vision"><span class="circle_icon"></span>自己的视角，别人的故事<span class="date">Aug 2012</span></a>
			
				<a class="life cate1" href="/2012/06/memorize-michael-jackson"><span class="circle_icon"></span>纪念 Michael Jackson - This Is It<span class="date">Jun 2012</span></a>
			
				<a class="life cate1" href="/2012/06/happy-madives"><span class="circle_icon"></span>传说中的马尔代夫<span class="date">Jun 2012</span></a>
			
				<a class="life cate1" href="/2011/03/japan-earthquake"><span class="circle_icon"></span>日本地震杂想<span class="date">Mar 2011</span></a>
			
			</div>
		</aside>

		<div id="container">
			<div id="pjax">
				
				<article id="post">
	<header id="header">
		<h1 id="identifier">相似度和距离小结</h1>
		<button id="fullscreen" class="header_icon"></button>
		<button id="fontsize" class="header_icon"></button>
	</header>
	<div id="content">
		<p>在机器学习中，相似性度量或者距离函数对于像聚类，邻域搜索这样的算法是非常重要的。在做分类时常常需要估算不同样本之间的相似性度量(Similarity Measurement)，这时通常采用的方法就是计算样本间的“距离”(Distance)。采用什么样的方法计算距离是很讲究，甚至关系到分类的正确与否。</p>

<p>一般而言，定义一个距离函数<script type="math/tex">d(x,y)</script>,需要满足以下几个准则：</p>

<ol>
  <li><script type="math/tex">d(x,y) = 0 </script>; //到自己的距离为0 </li>
  <li><script type="math/tex">d(x,y)>=0</script>    // 距离要非负 </li>
  <li>对称性，<script type="math/tex">d(x,y) = d(y,x)</script>  //如果A到B距离是a，那么B到A的距离也应该是a </li>
  <li>三角形法则(两个之和大于第三边） <script type="math/tex">d(x,k)+ d(k,y) >= d(x,y)</script></li>
</ol>

<p><strong>1 欧氏距离(Euclidean Distance)</strong></p>

<p>欧氏距离是最易于理解的一种距离计算方法，源自欧氏空间中两点间的距离公式。这也是我们平时学习用到最多的。</p>

<p>我们一般用到的是二范数的形式。</p>

<script type="math/tex; mode=display">
D(x,y) = (\sum_{i=1}^{n}\left|x_i-y_i \right|)^{\frac{1}{2}}
</script>

<p>看起来是不是又熟悉又简单。</p>

<p>我们熟悉的欧氏距离虽然很有用，但也有明显的缺点。它将样品的不同属性（即各指标或各变量）之间的差别等同看待，这一点有时不能满足实际要求。</p>

<p><strong>2 曼哈顿距离(Manhattan Distance)</strong></p>

<p><strong>3 切比雪夫距离 ( Chebyshev Distance )</strong></p>

<p><strong>4 闵可夫斯基距离(Minkowski Distance)</strong></p>

<p>其实之所以把这些距离放在一起是因为这都差不多，都算是闵氏距离具体实例。</p>

<p>闵氏距离的定义：</p>

<p>两个<script type="math/tex">n</script>维变量<script type="math/tex">X(x_1,x_2,…,x_n)</script>与 <script type="math/tex">Y(y_1,y_2,…,y_n)</script>间的闵可夫斯基距离定义为：</p>

<script type="math/tex; mode=display">
D(x,y) = ({\sum_{i=1}^{n}{|x_i-y_i|^p})^\frac{1}{p}
</script>

<p>其中<script type="math/tex">p</script>是一个变参数。</p>

<p>根据变参数的不同，闵氏距离可以表示一类的距离。</p>

<p>当<script type="math/tex">p=1</script>时，就是曼哈顿距离</p>

<p>当<script type="math/tex">p=2</script>时，就是欧氏距离</p>

<p>当<script type="math/tex">p\to\infty</script>时，就是切比雪夫距离</p>

<p>有关曼哈顿和切比雪夫距离的定义大家可以上网自己去查一下。</p>

<p>简单说来，闵氏距离的缺点主要有两个：</p>

<ol>
  <li>将各个分量的量纲(scale)，也就是“单位”当作相同的看待</li>
  <li>没有考虑各个分量的分布（期望，方差等)可能是不同的。</li>
</ol>

<p><strong>5 马氏距离(Mahalanobis Distance)</strong></p>

<p>马氏距离是由印度统计学家马哈拉诺比斯 (P. C. Mahalanobis)提出的，表示数据的协方差距离。它是一种有效的计算两个未知样本集的相似度的方法。与欧式距离不同的是它考虑到各种特性之间的联系（例如：一条关于身高的信息会带来一条关于体重的信息，因为两者是有关联的），并且是尺度无关的 (scale-invariant)，即独立于测量尺度。</p>

<p>有<script type="math/tex">M</script>个样本向量<script type="math/tex">X_1~X_m</script>，协方差矩阵记为<script type="math/tex">S</script>，均值记为向量<script type="math/tex">\mu</script>，则其中样本向量<script type="math/tex">X</script>到<script type="math/tex">\mu</script>的马氏距离表示为：</p>

<script type="math/tex; mode=display">Sample_1 = \{3,4,5,6\}</script>

<script type="math/tex; mode=display">Sample_2 = \{2,2,8,4\}</script>

<p>它们的均值为：
<script type="math/tex">
\mu = \{2.5, 3, 6.5, 5\}
</script></p>

<p>协方差矩阵为：
<script type="math/tex">% <![CDATA[

\begin{bmatrix}
0.25 & 0.50 & -0.75 & 0.50 \\
0.50 & 1.00 & -1.50 & 1.00 \\
-0.75 & -1.50 & 2.25 & -1.50 \\
0.50 & 1.00 & -1.50 & 1.00 
\end{bmatrix}
 %]]></script></p>

<p>然后套用我们刚才给出的公式就可以了。</p>

<p>我们可以发现，如果各个样本向量之间独立同分布，协方差矩阵是单位矩阵。马氏距离也就变成了欧式距离。</p>

<p>马氏距离不受量纲的影响，两点之间的马氏距离与原始数据的测量单位无关；由标准化数据和中心化数据 (即原始数据与均值之差）计算出的二点之间的马氏距离相同。马氏距离还可以排除变量之间的相关性的干扰。<strong>它的缺点是夸大了变化微小的变量的作用。</strong></p>

<p>需要注意的是：</p>

<ol>
  <li>马氏距离的计算是建立在总体样本的基础上的，这一点从上述协方差矩阵的解释中可以得出，也就是说，如果拿同样的两个样本，放入两个不同的总体中，最后计算得出的两个样本间的马氏距离通常是不相同的，除非这两个总体的协方差矩阵碰巧相同；</li>
  <li>计算马氏距离过程中，要求总体样本数大于样本的维数，否则得到的总体样本协方差矩阵逆矩阵不存在，这种情况下，用欧式距离来代替马氏距离，也可以理解为，如果样本数小于样本的维数，这种情况下求其中两个样本的距离，采用欧式距离计算即可。</li>
  <li>还有一种情况，满足了条件总体样本数大于样本的维数，但是协方差矩阵的逆矩阵仍然不存在，比如 <script type="math/tex">A（3，4）</script>， <script type="math/tex">B（ 5， 6）</script>； <script type="math/tex">C（ 7， 8）</script>，这种情况是 因为这三个样本在其所处的二维空间平面内共线（如果是大于二维的话，比较复杂？）。这种情况下，也采用欧式距离计算。</li>
  <li>在实际应用中 “总体样本数大于样本的维数 ”这个条件是很容易满足的，而所有样本点出现 3）中所描述的情况是很少出现的，所以在绝大多数情况下，马氏距 离是可以顺利计算的，但是马氏距离的计算是不稳定的，不稳定的来源是协方差矩阵，这也是马氏距离与欧式距离的最大差异之处。</li>
</ol>

<p>在R中有指令。</p>

<pre><code>dist(x,method="euclidean") 
</code></pre>

<p>即为计算欧式距离，其余可选的参数还有<code>"maximum", "manhattan", "canberra", "binary" ,"minkowski"</code></p>

<h2 id="section">参考链接</h2>
<ol>
  <li><a href="http://blog.csdn.net/beta2/article/details/5045020">机器学习中的相似性度量</a></li>
  <li><a href="http://www.cnblogs.com/heaad/archive/2011/03/08/1977733.html">距离和相似性度量</a></li>
  <li><a href="http://blog.csdn.net/v_july_v/article/details/8203674/">距离、相似度和熵的度量方法总结</a></li>
</ol>

		
		<div id="donation">
		<b><a href="https://me.alipay.com/bigchao">请我喝一杯</a></b>
		</div>
		<div id="social">
		    <a id="weibo" href="http://v.t.sina.com.cn/share/share.php?url=http://yangchao.me/2014/03/distance-similarity&title=相似度和距离小结"></a>
			<a id="twitter" href="https://twitter.com/intent/tweet?url=http://yangchao.me/2014/03/distance-similarity&text=相似度和距离小结"></a>
			<a id="end_cc" href="http://creativecommons.org/licenses/by-nc-sa/3.0/cn/"></a>
		</div>
	</div>
</article>

<div id="disqus_thread"></div>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink" target="_blank">Loading Disqus comments...</a>



			</div>
		</div>

		<div id="notice">左右滑动</div>
		
		
		
		
	</body>
</html>
