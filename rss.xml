<?xml version="1.0"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>技术改变世界</title>
    <link>http://yangchao.me/</link>
    <atom:link href="http://yangchao.me/rss.xml" rel="self" type="application/rss+xml" />
    <description>阅读塑造人生</description>
    <language>zh_CN</language>
    <pubDate>Tue, 11 Feb 2014 06:49:08 -0800</pubDate>
    <lastBuildDate>Tue, 11 Feb 2014 06:49:08 -0800</lastBuildDate>

    
    <item>
      <title>烟波至爽，数据为王</title>
      <link>http://yangchao.me/2014/02/douban</link>
      <pubDate>02 Feb 2014</pubDate>
      <author>Peter</author>
      <guid>http://yangchao.me/2014/02/douban</guid>
      <description>&lt;p&gt;最近觉得有必要把这段时间数据挖掘的知识做一个详尽的数理，有些东西总也不碰就会忘了。所以想到开一个豆瓣专栏，写一些R进行数据分析、可视化的知识。 尤其是data.table的用法。经过了一次修改，现在专栏计划已经通过了，马上就要发表了。&lt;/p&gt;

&lt;p&gt;前两天和Guy聊天，讲到我们香港的R用户现在人数已经在Dim Sum Lab放不下啦，想让我帮忙从城大定一个教室，我欣然答应。毕竟从成立的不到10个人，每次来的人都一点一点增加，心里真是高兴。下次我会做一个专门针对于&lt;strong&gt;data.table&lt;/strong&gt;的tutorial，这两天赶紧准备下。上次的&lt;code&gt;ggplot2&lt;/code&gt;的tutorial还是挺受欢迎的，当然还有&lt;code&gt;knitr&lt;/code&gt;的, Fuk的几次tutorial讲Rcurl, plyr也都非常棒。靠我们这帮子人刚开始的热情终于让越来越多的人加入到这个社区来。写《The Art of pragramming R》的老爷爷，Norm还是我们香港R用户的一员呢。&lt;/p&gt;

&lt;p&gt;现在的技术路线就是facebook上面的信息用Rcurl发布，展示的内容用knitr写Rmarkdown文件，用slidefy做presentation。 感觉活在R里边了。&lt;/p&gt;

&lt;p&gt;最近另外一个着迷的就是emacs。 虽然我算是半个vim党，但是emacs的org mode确实太强大了，所以想好好学学。&lt;/p&gt;

&lt;p&gt;专栏是免费阅读，我先放个样章在这里。&lt;/p&gt;

&lt;p&gt;所有的专栏内容都会从新写，不会从现在博客的ggplot2的教程中直接复制过去。更加面向实际操作一点， 而不是一点点的搞起。
下面大家先一睹为快我的专栏导读把，不是吹， 以后可全是干货啊。都是我平时工作中遇到的实际问题，一点一点总结的经验呢。&lt;/p&gt;

&lt;h3&gt;第一篇 ： 导读&lt;/h3&gt;

&lt;p&gt;在为自己的专栏想一个特别霸气的名字的时候， 我和室友正在纪录片《故宫》， 里边讲到了承德避暑山庄的烟波至爽殿，于是名字也就脱口而出。觉得很满意，显得很有底蕴，特别适合豆瓣文青聚集地。 说到数据为王，这两年有关“大数据”的概念可以说是火的不行， 可以听到大家张口闭口就大数据，都知道这是一个“大数据时代”， 都知道了有的书中提到的”相关性比因果关系更加重要“等等的观点。&lt;/p&gt;

&lt;p&gt;很遗憾，我可能有个特立独行的毛病，一个东西一旦太过炒作太多我就不太喜欢。但是为了照顾大家的兴致， 我会在专栏最后的部分给大家分享一个大家可能认为还算是一个大数据的数据分析的例子。&lt;/p&gt;

&lt;h5&gt;那么我们讲什么呢？&lt;/h5&gt;

&lt;p&gt;按照章节来分类&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;数据处理&lt;/li&gt;
&lt;li&gt;数据分析 （篇幅最少）&lt;/li&gt;
&lt;li&gt;数据可视化&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;专栏主要讲解利用R语言进行数据的处理、分析、可视化的具体细节和基本要点。主要想和大家分享一下我在平时工作中最常用、也最容易上手的一些基本思路和基本技巧。尤其是关于数据可视化的部分。我非常喜欢像Economicst，New York Times刊登出来那种的图表。看过很多介绍可视化的文章和书籍， 里边分享的很多， 但是当我看到这些图表的时候，我不想只是欣赏，也想自己做出来。但是我们不管是数据分析，还是数据可视化，其中接近百分之五十的经历都是在做一些数据的预处理。把原始数据转变为我们想要的数据进而在分析或者可视化。如果跳过这一部，在我可视化的过程中对数据的操作部分，大家可能看起来就会一知半解。 所以我们会用相当大量的篇幅来介绍数据的预处理。 对数据的预处理，却也是也就包含了一些简单基本的对数据的描述性分析。&lt;/p&gt;

&lt;h5&gt;为什么用R语言？&lt;/h5&gt;

&lt;p&gt;是的，开始这个专栏意味着你要开始学习编程了。虽然其他一些工具，像Excel可以胜任部分工作，为什么要学习一种编程语言呢？
因为我们要开始学编程了！这难道还不是一个非常充分的理由么？&lt;/p&gt;

&lt;p&gt;其实还有一个理由，因为我们都很懒。对，因为懒而编程。&lt;/p&gt;

&lt;p&gt;我们想要完成一件事情，越快越好，越不费事费力越好。现在电脑可以帮我们完成的很多，只要我们会用命令指挥他们即可。在Excel中我们可以完成很多事情，但是一旦涉及到数据类型比较复杂，或是要重复性操作的时候Excel就显得有点力不从心了。&lt;/p&gt;

&lt;p&gt;借用《Learn Python the Hard Way》中的一句话，&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;You can code. They cannot. That is pretty damn cool.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;这里不太需要再介绍R语言的优越之处，大家上网搜下即可。我的感受是R语言作为一种统计学家发明出来的语言，在数据分析方面有着比较大的优质。近来越来越受到人们的关注和重视，其开源社区的活跃程度让我们看到这个语言的生机勃勃的特性。其拥有大量的工具包，你想完成的事情已经有很多人搞定了。（这也使许多其他开源软件的好处，比如我的挚爱大GNU的Emacs。） 可谓站在了巨人的肩膀上。&lt;/p&gt;

&lt;p&gt;我们学习编程，只是想实现算法，对一般的数据结构又不那么在意，数据量也没有大到内存都放不下， 所以对于初学者，R是可以很快上手并可以尝到甜头让人继续学习的。最重要的，我们想用R处理数据画图或者数据挖掘， 已经有人把代码写好了。我们只需要会看，然后再稍微微调下就可以了。这简直太适合懒人学习了。&lt;/p&gt;

&lt;p&gt;我小时候学过8年的小提琴，天资不算聪颖，但最后练得也还不错。 所以对熟能生巧有特别的感觉。 近来Gladwell在他的畅销书《Outliers》（中文译名《异类》）有个特别时髦的理论， 10000小时理论。也讲得的是同一个意思。 每天上手练一点，慢慢也就熟悉了。无所谓高端还是屌丝， 无他， 唯手熟尔。&lt;/p&gt;

&lt;p&gt;同时我也有另外一个感触，相比于C，C++等更偏向于底层的语言，学习R好比是练钢琴，开始学习的可以唱到甜头， 不用好久可以弹出比较简单但是也很好听的曲子，像”一闪一闪亮晶晶“之类的。不像小提琴， 学了两年可能还跟拉锯一样。 但是像真正精通， 后期的学习曲线还是挺陡峭的，不可避免要学习数据结构， 面向对象等知识， 而且到后来就觉得R在运算的时候很慢， 对内存的管理并不到位等等。 但是现在， 对于大多人来说， R已经足够了，我们不需要做到 “Perfect”， 到“Fairly Good” 对于大多数人就已经足够了。&lt;/p&gt;

&lt;h5&gt;目标读者是哪些人？&lt;/h5&gt;

&lt;p&gt;本专栏绝对倾情奉献， 目标读者是包括但不限于&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;喜爱玩数据，喜欢可视化的人！&lt;/li&gt;
&lt;li&gt;对编程有点兴趣，也知道这个很有用应该学，但是一直以没时间懒得学年龄大了学不动了为借口拖延症患者！！&lt;/li&gt;
&lt;li&gt;想对自己生活有些改变的朋友，并且需要即刻行动起来的人！！！&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;尤其对于第三点， 这也是我决心开设这样一个专栏的目的。这里不想心灵鸡汤， 不想拽成功学， 我是那种什么都喜欢折腾， 这么都愿意去学， 也觉得什么都有用的人。 正所谓乔布斯的“Connecting Dots”。 如果我们知道这个对于数据的处理确实有用， 想利用点时间学习下，而不只是逛逛微博， 看看韩剧， 日子这样一天天过去。 那么确实学点数据分析， 从功利主义的角度还是实用主义的角度都是高收益的。 因为我的工作现在是以数据处理为主， 过了大概一年当初的新鲜期感觉已经逐渐褪去， 自己学习的意愿也再减退。 所以这个时候我觉得有必要把我之前看过的那些书籍，走过的弯路，自己学校里比较受欢迎的讲座全都拿出来，温故而知新。 所谓教学相长， 大家一起交流。&lt;/p&gt;

&lt;p&gt;同样，对于那些编程大牛们什么都知道的人， 可能觉得这篇专栏过于幼稚，我所写太过简单简直是在侮辱他们的智商。 首先，本系列倾情奉献， 绝对不能被理解为侮辱智商。我只是可能比我的目标读者们懂得这方面的知识多一点，想一起分享让他们少走弯路。如果你们发现我这个专栏里的每一个句子每一个知识点你已经了如指掌， 还是像《Learn Python the hard way》 里的忠告&lt;/p&gt;

&lt;blockquote&gt;&lt;ol&gt;
&lt;li&gt;不要再阅读此专栏， 这不是为你们而写， 我是写给那些并不是什么都知道的人&lt;/li&gt;
&lt;li&gt;倒空自己， 如果你已经什么都会了，就很难再向其他人学习任何东西&lt;/li&gt;
&lt;li&gt;去学Lisp语言， 通常什么都会的人会喜欢Lisp&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;

&lt;h5&gt;专栏主要特色是什么？&lt;/h5&gt;

&lt;p&gt;我自己想到的专栏的特色可能为三个字：&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;接地气&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;因为这个专栏有一个很重要的读者： 我的女朋友。她作为一个纯文科生，学新闻在Marketing从业的绝对文青。 热爱电影，喜欢看小说。 经常觉得我看的讲程序的书都是那种特别“有用但是枯燥“的书，缺少了一种浪漫主义色彩。 这个专栏的存在就是想证明，其实这个这个数据的世界并不枯燥， 而且相当有趣！ 这篇专栏应该看起来满满的都是爱啊！&lt;/p&gt;

&lt;p&gt;所以这个专栏算是手把手来教， 诚意十足。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;我觉得哪些部分在书籍或网上的资料已经相关帖子讨论的相当详尽， 我会给出相关链接， 不会拾人牙慧。&lt;/li&gt;
&lt;li&gt;并不会面面俱到，我会着重于数据的整理和可视化。 会将一些琐碎的小案例经过自己的整理，呈现一条主线给大家。&lt;/li&gt;
&lt;li&gt;主要以案例学习为主， 以平时工作马上就能用的到为主要目的。 不会像一般介绍R语言从赋值， array， list， dataframe一点点讲起。并不是说这个不重要，为什么如此参见第一条。 这样的写法带来的一个缺陷就是不够系统， 但是希望可以做到一个领进门的作用。刚开始大家对于code可能什么都不动，会做出非常详尽的讲解。&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;但是我觉得相比于与其他的网上的教程， 我希望在如下方面可以有所胜出&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;阅读体验&lt;/li&gt;
&lt;li&gt;互动性&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;如果你遇到什么问题，我会尽可能为您讲解，或是给您相关资料的链接。 遇到最基本的问题解决不了这是我们开始学习编程最容易泄气的地方。当时我一个人想学习Hadoop的相关知识，但是对于linux系统的不熟悉安装时候处处碰壁， 当时心里那种无助的感觉记忆深刻。 所以这个专栏的存在就是为了让大家减轻这方面的痛苦， 更加享受编程的过程。&lt;/p&gt;

&lt;p&gt;我会根据读者的回馈来调整更新自己的内容，把大家普遍反映的问题着重讲。&lt;/p&gt;

&lt;p&gt;但是不欢迎那些不经任何思考， 光光po问题的人。这点请参考《提问的艺术》。 请认真对待你的问题， 就像你期望大家可以认真的回答一样。在提问之前先思考下， 独立解决问题也是一种能力。提问的时候要表述清楚。&lt;/p&gt;

&lt;p&gt;我会留作业， 也会判作业。 希望可以交到朋友， 因为和数据打交道了太久， 也想和人打打交道：）。 当然了，写了专栏，还是希望更多人看更多人喜欢！ 街坊邻居觉得好的多替我宣传哈！&lt;/p&gt;

&lt;p&gt;其实我这个人还是挺扯淡的，后期的时候大家可以看到我稍微真实可爱的一面。不过开始还是要严谨， 严肃！&lt;/p&gt;

&lt;h5&gt;一个例子&lt;/h5&gt;

&lt;p&gt;现在给大家一个例子， 这个例子看不懂怎么实现的不要紧。 到后来的学习中我们还会提到。主要是让大家感受下，这个专栏中我们反复见到的数据分析的一般流程。&lt;/p&gt;

&lt;p&gt;我现在有一个新浪微博的平时数据，我想来玩一玩这个数据&lt;/p&gt;

&lt;p&gt;数据是这个样子的&lt;/p&gt;

&lt;pre&gt;

            V1       V2         V3 V4 V5 V6 V7 V8  V9 V10 V11 V12
     1:      1 20120213 1011139914  0  0  1  0  0 \\N   0   0   0
     2:      2 20120218 1011139914  0  1  2  2  0 \\N   1   0   0
     3:      3 20120219 1011139914  0  1  0  0  0 \\N   2   0   0
     4:      4 20120201 1011139914  0  1  0  0  0 \\N   0   0   0
     5:      5 20120224 1011139914  0  1  2  0  0 \\N   1   0   0
    ---                                                          
835353: 835353 20120215  283149150  0  0  0  0  0 \\N   0   0   0
835354: 835354 20120202  283149150  0  0  0  0  0 \\N   0   0   0
835355: 835355 20120222  283149150  0  0  0  0  0 \\N   0   0   0
835356: 835356 20120203  283149150  0  0  0  0  0 \\N   0   0   0
835357: 835357 20120206  283149150  0  0  0  0  0 \\N   0   0   0
&lt;/pre&gt;


&lt;p&gt;可以看到，一共是83万行。12列&lt;/p&gt;

&lt;p&gt;每一列其实是有名字的，我们要重新命名&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;library（data.table) 
#  我们今后主要介绍的就是这个包，因为它是在太强大了！
column_names &amp;lt;- c(&quot;ID&quot;,&quot;date&quot;,&quot;uid&quot;,&quot;origin&quot;,&quot;fwd&quot;,&quot;cmts&quot;,&quot;reply&quot;, &quot;fwded&quot;, &quot;ignore&quot;,&quot;cmted&quot;,&quot;liked&quot;,&quot;favorate&quot;)
# 把新的列明起好， 因为防止中文乱码，所以我干脆用了英文来代替。分别表示ID，日期，用户ID，发帖量，评论量，回复量，转发量等等。
setnames(DT, paste0(&quot;V&quot;,c(1:12)), column_names)
# 把原来的列名 v1 - v12 全部换掉
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;现在数据已经是这个样子了&lt;/p&gt;

&lt;pre&gt;
            ID     date        uid origin fwd cmts reply fwded ignore cmted
     1:      1 20120213 1011139914      0   0    1     0     0    \\N     0
     2:      2 20120218 1011139914      0   1    2     2     0    \\N     1
     3:      3 20120219 1011139914      0   1    0     0     0    \\N     2
     4:      4 20120201 1011139914      0   1    0     0     0    \\N     0
     5:      5 20120224 1011139914      0   1    2     0     0    \\N     1
    ---                                                                    
835353: 835353 20120215  283149150      0   0    0     0     0    \\N     0
835354: 835354 20120202  283149150      0   0    0     0     0    \\N     0
835355: 835355 20120222  283149150      0   0    0     0     0    \\N     0
835356: 835356 20120203  283149150      0   0    0     0     0    \\N     0
835357: 835357 20120206  283149150      0   0    0     0     0    \\N     0
        liked favorate
     1:     0        0
     2:     0        0
     3:     0        0
     4:     0        0
     5:     0        0
    ---               
835353:     0        0
835354:     0        0
835355:     0        0
835356:     0        0
835357:     0        0

&lt;/pre&gt;


&lt;p&gt;这是一个月的数据，我们想对每一天所有用户的发帖量，等所有除了ID，date， uid这三个加总。&lt;/p&gt;

&lt;p&gt;在所有数据分析的开始，先要进行大概的描述性分析。虽然很简单，但是很重要&lt;/p&gt;

&lt;p&gt;这一部也就是说我像知道2012年2月每天的加总情况是怎样的&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;sum &amp;lt;- DT[, lapply(.SD, sum), by = date, .SDcols = 4:12 ]
# 仅仅这一句指令啊！ 就实现我说的刚才的事情！ 求出了2012年2月每天的加总量。
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;这里data.table 包里的简洁代码对我这种代码洁癖简直就是太适合了！
之所以选择data.table， 原因有三点&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;速度快&lt;/li&gt;
&lt;li&gt;代码简洁&lt;/li&gt;
&lt;li&gt;但是代码不太容易懂，而且官方阅读材料比较少。这也就使得我这个专栏有了最直接的意义！&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;然后我就可以接着做一些可视化的工作了，比如二月有春节，我想知道春节时候的情况&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://i.imgur.com/cp6Bmzy.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;这个图完全是用R做出的，用的是非常著名的ggplot2包。网上关于这些包的教程有不少。大家可以搜搜看看，我在这个专栏里会对一些我感兴趣的图形做出针对性的讲解。&lt;/p&gt;

&lt;p&gt;我现在有大概16个月的微博数据，那我想看看所有这些天的8个指标变化情况应该怎办呢？可以用热力学图。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://i.imgur.com/R97XKaw.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;这个也是用R做出来的，调用一个包，代码量也非常少，我们在今后会对代码进行讲解，并分享给大家。&lt;/p&gt;

&lt;p&gt;所以总结下来，这个专栏想让大家记住三个字&lt;/p&gt;

&lt;p&gt;玩数据！&lt;/p&gt;

&lt;p&gt;这次的作业： 安装好R， 初学者建议用Rstudio，简单学习R语法。我们下次再见！&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Happy New Year</title>
      <link>http://yangchao.me/2013/12/happy-new-year</link>
      <pubDate>30 Dec 2013</pubDate>
      <author>Peter</author>
      <guid>http://yangchao.me/2013/12/happy-new-year</guid>
      <description>&lt;p&gt;&lt;embed src=&quot;http://tzttxx.com/ttxx080617bak/Article/UploadFiles/200812/2008120509284409.mp3&quot; autostart=&quot;true&quot; hidden=&quot;true&quot; loop=&quot;true&quot;&gt;&lt;/embed&gt;&lt;/p&gt;

&lt;p&gt;转眼一年，又到了写年终总结的时候了。2013年，和过去的每一年都基本相同。但又有那么一点不一样。相同的是年年有欢笑，年年有成长。不同的是就是下面要写的。总结下来这一年有收获，总评4星。&lt;/p&gt;

&lt;p&gt;2012年年底的时候看到了豆瓣上一篇非常火爆的帖子，是彭萦写的回顾自己2012年读过的书，大概200多本，各式各类。我觉得酷毙了，尼玛200多本，简直太有收获了。于是自己给自己也定下一个小目标，2013要多读书。尤其是在年底的时候（就是现在）框框写出总结，亮出逼格，狂刷存在感。让一群有志读书确缺少自制力行动力的同学们颤抖去吧！&lt;/p&gt;

&lt;p&gt;于是2013年是从一本叫做Moleskine的笔记本开始的，并伴随了我一年。还有一个豆瓣的豆列记录这一年读的书。豆列地址在：&lt;a href=&quot;http://book.douban.com/doulist/1759646/&quot;&gt;这里&lt;/a&gt;, 还有好多的书和manual只是读取个别章节，依然放在“在读的书里”没有加入豆列。深刻理解，对于编程上手最关键，读一万本书自己不写也啥用都没有。其他也是相通的吧。&lt;/p&gt;

&lt;p&gt;最后总结下来，相比于读书狂人，书读的其实不多，所以逼格也没法亮，但是有些真实的想法想和大家分享下。&lt;/p&gt;

&lt;p&gt;这一年最大的感触和成长是自己学习的意愿明显增强。这一年自己逐渐向技术人员转变。看的书现在也多是Oreily的书了。自己特别喜欢一些数据分析开始学SAS，在学习SAS的时候接触到了机器学习，又顺藤摸瓜开始学习python 和 R。 因为特别喜欢数据可视化，开始学习不同的软件， 像Tableau， gephi，当然还有R的ggplot2。因为想自己搭建一个自己的博客，又不想用Wordpress，所以用了github，开始学习了git基本操作和linux的基本代码操作， 当然还有了解一点点html，css，javasript。现在自己的博客用的是jekyll，还有稍微懂一点点ruby。 年中加入了一个小小的startup，学习了django，neo4j数据库。现在回来又到了自己的本行，时间序列，金融建模和量化。但是感觉看世界的角度已经不一样了。&lt;/p&gt;

&lt;p&gt;东西比较多， 从不好的一面就是没有什么特别精通，除了R现在基本可以解决比较多的问题之外。其他也只是皮毛，自己平时够用而已。 当然自己摸索的时候会有误区，走了弯路。只有博，没有专。但是在误打误撞中也知道了自己的核心竞争力在哪儿，不可能一直这么误打误撞下去。比如我在年终加入的一个小小的创业团队，香港算我一共3个人，建一个网络应用。这个时候我花了不少心思了解django的运作，学了ajax，jqery，一些网络配置啥的等等吧，但是还是无法把自己的任务完成好，最后退出是一个比较好的选择。今年关于大数据的讨论呼声很高，我也尝试学习了有关Computer Science的东西，现在更让我专注在自己喜欢的地方。也给了2014一个更加明确的方向。这里推销下下，我的博客现在刚刚搭建好东西不多，会定期写点东西，有关数据分析杂七杂八的。域名是yangchao.me, 初来乍到，大家多多支持哈！&lt;/p&gt;

&lt;p&gt;从好的方面来讲，其实这是由主线的。从数据分析到数据可视化，从商业到开源， 所以这样看来SAS到，R 再到 Python 似乎也有一条主线贯穿其中。而大家看到的技术大咖，多是把博客搭载在github上，要是想用D3进行数据可视化，也必须要知道一些html5， css3，svg啥的基本知识。所以感觉像散文一样“形散而神聚”吧。&lt;/p&gt;

&lt;p&gt;原来是因为懒，怕麻烦，因为遇到种种技术问题再解决我觉得太烦躁了，是浪费时间。但是现在本身看来就是一种磨砺。似乎所有的程序语言里边开始都提倡“get your hand dirty”，所以这里没有可以优雅的学习的这样一种途径。有时候半天看不出来一个代码错误，或者无缘无故程序就是跑不对，这时候都非常的沮丧想挠墙，拿刀插自己。有时候进入死胡同，不解决问题啥都不想干光想这个。这都是一种常态，所以适应了就是一种成长。&lt;/p&gt;

&lt;p&gt;第二大收获就是学习调节，更加爱惜身体。李开复老师罹患癌症确实对我的冲击挺大的，可以说我非常热爱生活，所以想一直健健康康的这么一直生活下去。所以熬夜平时压力大不懂得调节这种生活方式是存在隐患的，虽然这都是个概率并不必然，但是个人遇到了就是百分之百。于是要加强锻炼，平和心态。作为李开复那样级别的人物，我们看来是有房有车家庭美满， 依然熬夜多压力大。可见生活就不是一劳永逸的，自己逼自己给自己点动力并无可厚非，但是基本要有个度。看到复旦于娟老师的博客，也有好多感悟。&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;“在生死临界点的时候，你会发现，任何的加班，给自己太多的压力，买房买车的需求，这些都是浮云，如果有时间，好好陪陪你的孩子，把买车的钱给父母亲买双鞋子，不要拼命去换什么大房子，和相爱的人在一起，蜗居也温暖。癌症是我人生的分水岭。别人看来我人生尽毁。其实，我很奇怪为什么反而癌症这半年，除却病痛，自己居然如此容易快乐。我不是高僧，若不是这病患，自然放不下尘世。这场癌症却让我不得不放下一切。如此一来，索性简单了，索性真的很容易快乐。名利权情，没有一样不辛苦，却没有一样可以带去。”&lt;/p&gt;

&lt;p&gt;“若天有定数，我过好我的每一天就是。若天不绝我，那么癌症却真是个警钟：我何苦像之前的三十年那样辛勤地做蝂捊。名利权情，没有一样是不辛苦的，却没有一样可以带去。”&lt;/p&gt;

&lt;p&gt;“活着就是王道，如是记之。”&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;看起来那么平实，又让人警醒。看到乔布斯的演讲，&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;“No one wants to die. Even people who want to go to heaven don&#39;t want to die to get there. And yet death is the destination we all share. No one has ever escaped it. And that is as it should be, because Death is very likely the single best invention of Life. It is Life&#39;s change agent. It clears out the old to make way for the new. Right now the new is you, but someday not too long from now, you will gradually become the old and be cleared away. Sorry to be so dramatic, but it is quite true.”&lt;/p&gt;

&lt;p&gt;“Your time is limited, so don&#39;t waste it living someone else&#39;s life. Don&#39;t be trapped by dogma — which is living with the results of other people&#39;s thinking. Don&#39;t let the noise of others&#39; opinions drown out your own inner voice. And most important, have the courage to follow your heart and intuition. They somehow already know what you truly want to become. Everything else is secondary.”&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;这里稍微提一句，因为我的同学们多是2013年开始工作，所以在聊天的时候明显感觉大家的侧重点已经更加实际更加生活。学生时期的稚嫩褪去，理想主义也褪去了。我的感觉是上班自己赚钱之后才感到生活的艰辛了，确实不容易。在这个时候容易迷茫，看不到希望，感到痛苦以及想拿刀插自己，这都是正常现象，我也经历过，现在也时不时经历一下。我个人的建议是： 1.要知足。虽然我看到好多同学现在事业有成，赚的比我多，住的比我好，玩的比我爽。感到有不少落差。但是又不能否认的是我的生活也是多少人比较羡慕的。人贵有自知之明，自己心里大概知道自己能到达的位置。自己的才华和努力达到最大化大概能什么样，徒有羡鱼情也没用。2.看看自己从原来到现在生活轨迹的变化，短短10年时间带给我们怎么的不同。所以未来的10年或是20年也一定是这样。前些天和江浩聊天，他当时从我们家乡一个充斥着各种小混混的小学也想不到自己几年后可以考去清华大学。宫照恒北大本科成绩实在太烂没法保本部，也估计想不到3年后去去哈佛读博士。从我自身来讲，现在想想从一个小地方自己出来上海上学，然后来到香港打拼。所以这个角度上我已经挺厉害了，而且可以预见当我们跳出最难得开始的几步，后面的天地一定会越走越宽了。&lt;/p&gt;

&lt;p&gt;这里稍微跑题一下： 有关拼搏，自己的定位。看到知乎有一个挺有名的问答。&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;问 ： 如果兔子都在拼命奔跑，是什么给了作为乌龟的你前进的动力？
在这个世界上永远存在一些比你更加牛的人，无论什么方面。如果把人生比作攀登，也许你穷其一生可以达到一定的高度，但对某些人来说珠峰都不成问题。对此，有的人选择退出竞争，泰然处之，在半山腰悠闲度日；但也有人不断向上。如果你是后者，当你明知道爬不到最顶端的时候，你攀爬的动力和意义是什么？你是如何保证动力持续不断的？&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;后面的回答我觉得挺实在，而且挺有借鉴价值的。&lt;/p&gt;

&lt;blockquote&gt;&lt;ol&gt;
&lt;li&gt;&lt;p&gt;就像@talich 老师在我去斯坦福念书以前赠我的那句话：“到了那儿，不用指望成为牛人，但至少你知道大海有多宽，能看到牛人在做什么，就够了。” 对乌龟来讲，兔子存在的意义在于，至少让它知道这世界还有“兔子”的存在，以及兔子跑得有多快。盗用知乎的slogan，让你看到更大的世界，这本身就是最大的意义。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;兔子的存在，能够让乌龟直面自己就是一只乌龟这个事实。有勇气面对真实的自己，才能准确的定位自己的位置，也才能冷静的思考最适合自己的人生规划。而这，很多时候恰恰是最知易行难的事。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;其实人越往后走，越会深刻体会到“阶级”的不可逾越性。愤青的时候会咒骂：“操他妈这世界为什么这么不公平。” 可当你不再被荷尔蒙冲昏头脑时，也许你会开始思考：既然现在是这种情况，那我应该做点什么呢？当你绞尽心机让自己变得更好的同时，也许你也在让这个世界变得更好哦。：）&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;

&lt;p&gt;生活不是偶像剧和成功学案例，很难给彼此出身理想各不同的人带上乌龟还是兔子的帽子。我们对生活的感悟，感知也不断深化。就比如前些天又拿出朱自清的《背影》来读，边读的时候自己也开始眼泪打转：&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;我說道，“爸爸，你走吧。”他往車外看了看，說，“我買幾個桔子去。你就在此地，不要走動。”我看那邊月台的柵欄外有幾個賣東西的等著顧客。走到那邊月台，須穿過鐵道，須跳下去又爬上去。父親是一個胖子，走過去自然要費事些。我本來要去的，他不肯，只好讓他去。我看見他戴著黑布小帽，穿著黑布大馬褂，深青布棉袍，蹣跚地走到鐵道邊，慢慢探身下去，尚不大難。可是他穿過鐵道，要爬上那邊月台，就不容易了。他用兩手攀著上面，兩腳再向上縮；他肥胖的身子向左微傾，顯出努力的樣子。這時我看見他的背影，我的淚很快地流下來了。我趕緊拭乾了淚，怕他看見，也怕別人看見。我再向外看時，他已抱了朱紅的桔子往回走了。過鐵道時，他先將桔子散放在地上，自己慢慢爬下，再抱起桔子走。到這邊時，我趕緊去攙他。他和我走到車上，將桔子一股腦兒放在我的皮大衣上。於是撲撲衣上的泥土，心裏很輕鬆似的，過一會說，“我走了，到那邊來信！”我望著他走出去。他走了幾步，回過頭看見我，說，“進去吧，裏邊沒人。”等他的背影混入來來往往的人裏，再找不著了，我便進來坐下，我的眼淚又來了。&lt;/p&gt;

&lt;p&gt;近幾年來，父親和我都是東奔西走，家中光景是一日不如一日。他少年出外謀生，獨立支持，做了許多大事。哪知老境卻如此頹唐！他觸目傷懷，自然情不能自已。情鬱於中，自然要發之於外；家庭瑣屑便往往觸他之怒。他待我漸漸不同往日。但最近兩年不見，他終於忘卻我的不好，只是惦記著我，惦記著我的兒子。我北來後，他寫了一封信給我，信中說道，“我身體平安，惟膀子疼痛利害，舉箸提筆，諸多不便，大約大去之期不遠矣。”我讀到此處，在晶瑩的淚光中，又看見那肥胖的，青布棉袍，黑布馬褂的背影。唉！我不知何時再能與他相見！&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;初中学的时候知道背诵全文，却完全无法体会其中的感情。随着自己出门在外，这些感悟越来越深。&lt;/p&gt;

&lt;p&gt;写了这么多差不多这就是这一年最大的感悟吧，写的比较杂，算是自己思想的一个汇报一股脑随性走哪儿写哪儿，这一年算是有比较大的变化。当然很多地方我还没变，比如依然很开朗很扯淡，热爱生活。依然非常感性，看到网上的视频“国贸快闪”就能被大家的喜乐的状态感染掉眼泪。看“爸爸去哪儿”甚至是“咱们结婚吧”都能看哭了。&lt;/p&gt;

&lt;p&gt;新的一年也有新的希望，新的计划。&lt;/p&gt;

&lt;p&gt;祝大家新年快乐，新的一年万事如意！&lt;/p&gt;

&lt;p&gt;I&#39;m loving life, hope you same.&lt;/p&gt;

&lt;p&gt;---大超哥&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>ggplot2 - 二维数据密度图</title>
      <link>http://yangchao.me/2013/11/ggplot2-2d-density</link>
      <pubDate>05 Nov 2013</pubDate>
      <author>Peter</author>
      <guid>http://yangchao.me/2013/11/ggplot2-2d-density</guid>
      <description>&lt;p&gt;地理课上，我们经常会看到等高线。在ggplot2中，也有实现一个和等高线差不多的利器&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;stat_density2d()&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;看个例子先&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;r&quot;&gt;    &lt;span class=&quot;c1&quot;&gt;# The base plot&lt;/span&gt;
    p &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; ggplot&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;faithful&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; aes&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;x&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;eruptions&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; y&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;waiting&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
    p &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; geom_point&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; stat_density2d&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img src=&quot;/assets/images/ggplot2-density/nE3VPUs.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;我们可以在原始图中添加类似登高线的表示，用以标记密集程度。&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;r&quot;&gt;    &lt;span class=&quot;c1&quot;&gt;# Contour lines, with &amp;quot;height&amp;quot; mapped to color&lt;/span&gt;
    p &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; stat_density2d&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;aes&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;colour&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;..level..&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img src=&quot;/assets/images/ggplot2-density/nghFH1z.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;r&quot;&gt;    &lt;span class=&quot;c1&quot;&gt;# Map density estimate to fill color&lt;/span&gt;
    p &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; stat_density2d&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;aes&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;fill&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;..density..&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; geom&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;raster&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; contour&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;FALSE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img src=&quot;/assets/images/ggplot2-density/bnGh3DC.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;r&quot;&gt;    &lt;span class=&quot;c1&quot;&gt;# With points, and map density estimate to alpha&lt;/span&gt;
    p &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; geom_point&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;
    stat_density2d&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;aes&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;alpha&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;..density..&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; geom&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;tile&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; contour&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;FALSE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img src=&quot;/assets/images/ggplot2-density/j1b0kxp.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;同一维的密度曲线一样，stat_density2d也可以调整binwidth用h()函数即可
体会下下面的这个例子&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;r&quot;&gt;    p &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; stat_density2d&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;aes&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;fill&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;..density..&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; geom&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;raster&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; contour&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;FALSE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; h&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;c&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;.5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img src=&quot;/assets/images/ggplot2-density/aDAgAtw.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;文中代码和图片下载在： &lt;a href=&quot;http://pan.baidu.com/s/1sw5uP&quot;&gt;这里&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

</description>
    </item>
    
    <item>
      <title>latticeExtra - Horizon Plot的简单实现</title>
      <link>http://yangchao.me/2013/10/horizon-lattice-extra</link>
      <pubDate>24 Oct 2013</pubDate>
      <author>Peter</author>
      <guid>http://yangchao.me/2013/10/horizon-lattice-extra</guid>
      <description>&lt;p&gt;上次给大家介绍了一下Horizon Plot的作图哲学，这次我们尝试着用LatticeExtra 这个包来实现以下。&lt;/p&gt;

&lt;p&gt;基本代码量不大，不过可以自定义的地方不少。&lt;/p&gt;

&lt;p&gt;有关Horizon Plot的作图哲学和一些其它预备知识，请看：&lt;a href=&quot;http://yangchao.me/2013/10/horizon-plot&quot;&gt;这里&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;文中实现的是按照原作者的Manual中的源代码, 在: &lt;strong&gt;&lt;a href=&quot;http://latticeextra.r-forge.r-project.org/man/horizonplot.html&quot;&gt;这里&lt;/a&gt;&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;并对代码进行详细注释。&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;r&quot;&gt;    
    require&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;latticeExtra&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;## 产生数据集&lt;/span&gt;
    set.seed&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    dat &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; ts&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;matrix&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;cumsum&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;rnorm&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;200&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)),&lt;/span&gt; ncol &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
    colnames&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;dat&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; paste&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;series&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; LETTERS&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;在安装latticeExtra的时候如果遇到问题，请参见一下代码重新安装&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;r&quot;&gt;    
    install.packages&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;xtsExtra&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; repos&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;http://R-Forge.R-project.org&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;    
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;horizon plot是将时间序列的数据可视化。所以我们需要将原来随机出来的数据转变成为随机数列， 用到的就是 &lt;code&gt;ts&lt;/code&gt;命令&lt;/p&gt;

&lt;p&gt;产生之后的数据是大概是这个样子&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;r&quot;&gt;    
    head&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;dat&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;n&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;




&lt;pre&gt;

        series A  series B series C series D  series E   series F  series G  series H  series I  series J  series K
 [1,] -0.6264538  7.517331 16.30991 6.529042 -14.14928 -10.513177 -29.42972 -19.38421 -14.69748 -32.70429 -28.79620
 [2,] -0.4428105  9.206204 18.20556 8.031466 -15.97536  -9.401245 -27.50656 -19.20529 -14.68476 -32.12291 -30.71846
 [3,] -1.2784391 10.792793 17.60257 8.559774 -14.98008 -10.272023 -29.36339 -19.48783 -15.55821 -32.26963 -29.09876
 [4,]  0.3168417 10.461885 17.21170 9.101965 -14.99194 -10.061291 -31.46951 -20.25513 -15.21541 -30.76265 -28.57949
 [5,]  0.6463495  8.176649 16.79548 8.965292 -15.59157  -9.991895 -30.77186 -20.83154 -15.39280 -31.04218 -28.63534
 [6,] -0.1741189 10.674311 16.41982 7.828558 -15.76952 -11.654544 -29.86441 -21.74639 -14.47136 -29.01444 -27.93892
 [7,]  0.3133101 11.341377 16.05319 6.331931 -16.19550 -10.843704 -30.06040 -21.37648 -14.17042 -30.21018 -27.88540
 [8,]  1.0516348 11.882704 15.75751 6.108545 -15.19884 -12.756050 -30.26722 -22.84417 -13.47703 -28.89786 -29.19569
 [9,]  1.6274162 11.869305 17.19933 8.110265 -14.47118 -14.002804 -29.54218 -24.58953 -13.15156 -29.42187 -31.31875
[10,]  1.3220278 12.379413 16.50179 8.331968 -16.19781 -13.004649 -28.14346 -25.25691 -12.74351 -29.06762 -31.52683
[11,]  2.8338090 12.215037 16.11363 8.496341 -15.84441 -13.545522 -29.73402 -24.17263 -11.98367 -29.13930 -31.83962
[12,]  3.2236522 12.635732 16.76616 8.828965 -15.11760 -13.761898 -28.42952 -24.04980 -14.27082 -29.27244 -32.89785
[13,]  2.6024116 12.235485 17.89093 8.443757 -14.44934 -15.383835 -28.23351 -24.54405 -13.75298 -29.36052 -32.48063
[14,]  0.3877118 10.865277 17.11882 7.045003 -16.87365 -16.834799 -28.57285 -23.87446 -15.10022 -28.44273 -32.79608
[15,]  1.5126427 11.853116 16.61074 9.720744 -17.10901 -16.483889 -27.30771 -24.22594 -14.73706 -28.41129 -31.97053
[16,]  1.4677091 13.372861 17.13436 9.297058 -15.12938 -16.658436 -26.36793 -24.34092 -13.42231 -27.05236 -30.67926
[17,]  1.4515188 13.064120 18.15211 8.998456 -14.33258 -17.249865 -25.08998 -24.26793 -13.87061 -26.93886 -31.30437
[18,]  2.3953550 11.810830 17.90095 7.206114 -16.04186 -18.583892 -25.38114 -23.17916 -14.67878 -26.76456 -32.17951
[19,]  3.2165762 12.453072 16.47095 6.958106 -17.70553 -19.681190 -24.60497 -21.88659 -14.76505 -26.81804 -32.03616
[20,]  3.8104775 12.408363 18.18008 6.710802 -17.21442 -17.645087 -24.30924 -20.60408 -13.17962 -27.24280 -30.61097
       series L
 [1,] -35.67228
 [2,] -34.86300
 [3,] -35.57462
 [4,] -38.26421
 [5,] -38.83126
 [6,] -37.53206
 [7,] -37.72235
 [8,] -38.36040
 [9,] -40.39578
[10,] -41.00015
[11,] -41.80832
[12,] -42.41509
[13,] -42.32819
[14,] -42.56248
[15,] -41.29996
[16,] -42.86375
[17,] -44.35723
[18,] -45.45436
[19,] -45.48347
[20,] -43.30978

&lt;/pre&gt;


&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;我们可以基本认定这个就是一个时间序列的数据了。&lt;/p&gt;

&lt;p&gt;因为我们是纯介绍这个Horizon Plot 这个图的作图格式，上面的代码只是模拟产生一个数据集。&lt;/p&gt;

&lt;p&gt;首先我们可以将数据简单的可视化一下子。&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;r&quot;&gt;    
    &lt;span class=&quot;c1&quot;&gt;## show simple line plot first, for reference.&lt;/span&gt;
    xyplot&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;dat&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; scales &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; list&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;y &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;same&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img src=&quot;/assets/images/horizon-latticeextra/zvu0wfQ.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;数据的大概变化就是如此吧&lt;/p&gt;

&lt;p&gt;下面开始我们的&lt;strong&gt;Horizon Plot&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;r&quot;&gt;    
    &lt;span class=&quot;c1&quot;&gt;## 先设定基本的图层设置&lt;/span&gt;
    infolayers &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;
    layer&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;panel.scaleArrow&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;x &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0.99&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; digits &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; col &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;grey&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                         srt &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;90&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; cex &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0.7&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;
    layer&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;lim &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; current.panel.limits&lt;span class=&quot;p&quot;&gt;(),&lt;/span&gt;
        panel.text&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;lim&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;x&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; lim&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;y&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; round&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;lim&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;y&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; font &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                   cex &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0.7&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; adj &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; c&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;-0.5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;-0.5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; col &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;#9FC8DC&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;这两个图层的大概意思是&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;第一个图层： 在右侧画出每个空间，然后箭头&lt;/li&gt;
&lt;li&gt;第二个图层： 计算出每个不同的变量的Horizon Plot中的基准值，并标图形的左边&lt;/li&gt;
&lt;li&gt;有关颜色的编码信息可以参照这个网站，并推荐之。&lt;a href=&quot;http://www.colorhexa.com/9fc8dc&quot;&gt;颜色信息&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;如果大家对基准值的这个概念还不是很熟悉的话，可以快速看看我之前的这篇博客 &lt;a href=&quot;http://yangchao.me/2013/10/horizon-plot&quot;&gt;《Horizon Chart - 惊艳到爆的哲学》&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;下面我们通过一系列的变通来分别体会下不同的参数的含义。
命令都接近于自然语言，所以有些很显而易见的就不提了。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Case 1&lt;/strong&gt;：each panel has a different origin and scale:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;r&quot;&gt;    
    &lt;span class=&quot;c1&quot;&gt;## (&amp;#39;origin&amp;#39; default is the first data value in each series).&lt;/span&gt;
    horizonplot&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;dat&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; layout &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; c&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; colorkey &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;TRUE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;
      infolayers
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img src=&quot;/assets/images/horizon-latticeextra/2i7atuA.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;短短一行代码，已经把Horizon Plot画出来了。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;colorky = TRUE 的意思是最右面是否把表明色阶的注释标出。大家可以试一试如果改成&lt;code&gt;FALSE&lt;/code&gt;会怎样&lt;/li&gt;
&lt;li&gt;每一个Panel的初始值和范围变化都是不一样的。&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&lt;strong&gt;Case 2&lt;/strong&gt;: fixed scale but different origin (baseline):&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;r&quot;&gt;    
    &lt;span class=&quot;c1&quot;&gt;## (similar in concept to scales = &amp;quot;sliced&amp;quot;)&lt;/span&gt;
    horizonplot&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;dat&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; layout &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; c&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; horizonscale &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; colorkey &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;TRUE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;
      infolayers
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img src=&quot;/assets/images/horizon-latticeextra/q3TGAps.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;通过&lt;code&gt;horizonscale=10&lt;/code&gt;, 所有的变化范围都变成了相同的值&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&lt;strong&gt;Case 3&lt;/strong&gt;: fixed scale and constant origin (all same scales):&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;r&quot;&gt;        
    horizonplot&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;dat&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; layout &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; c&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; origin &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; horizonscale &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; colorkey &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;TRUE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;
      infolayers
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img src=&quot;/assets/images/horizon-latticeextra/0Rs2hLj.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;通过&lt;code&gt;origin=0&lt;/code&gt;把所有的初始值都设为0&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&lt;strong&gt;Case 4&lt;/strong&gt;：same scales with full coverage of color scale:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;r&quot;&gt;        
    horizonplot&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;dat&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; layout &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; c&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; origin &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
            scales &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; list&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;y &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; list&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;relation &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;same&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)),&lt;/span&gt;
            colorkey &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;TRUE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; colorkey.digits &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;
      infolayers
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img src=&quot;/assets/images/horizon-latticeextra/8CwVN62.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;通过&lt;code&gt;scales = list(y = list(relation = &quot;same&quot;))&lt;/code&gt;将右边的scales显示为绝对值, 而不是变化值。&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&lt;strong&gt;Case 5&lt;/strong&gt;: use ylab rather than strip.left, for readability.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;r&quot;&gt;        
    horizonplot&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;dat&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; horizonscale &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; colorkey &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;TRUE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                layout &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; c&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; strip.left &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;FALSE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                ylab &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; list&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;rev&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;colnames&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;dat&lt;span class=&quot;p&quot;&gt;)),&lt;/span&gt; rot &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; cex &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0.7&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;
      layer_&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;panel.fill&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;col &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;gray90&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; panel.xblocks&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; col &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;white&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img src=&quot;/assets/images/horizon-latticeextra/F0tqAw5.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;通过&lt;code&gt;strip.left = FALSE&lt;/code&gt;把原来竖起来的图例去掉&lt;/li&gt;
&lt;li&gt;再通过&lt;code&gt;ylab = list(rev(colnames(dat)), rot = 0, cex = 0.7))&lt;/code&gt;把原来的加上&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;Horizon Plot基本上常用的就是这一些用法。当然还有不少应用到实际中的，特别是在表现在股票价格变化中的时候，就可以明显感觉它的强大之处。我们会在之后介绍具体的特别应用&lt;/p&gt;

&lt;p&gt;相关文章：&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&quot;http://www.colorhexa.com/9fc8dc&quot;&gt;颜色信息&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&quot;http://latticeextra.r-forge.r-project.org/#segplot&amp;amp;theme=default&quot;&gt;LatticeExtra: R Forger&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&quot;http://cran.r-project.org/web/packages/latticeExtra/latticeExtra.pdf&quot;&gt;官方Manual&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;文中代码和图片在: &lt;a href=&quot;http://pan.baidu.com/s/1DvW29&quot;&gt;这里&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

</description>
    </item>
    
    <item>
      <title>Horizon Chart - 惊艳到爆的哲学</title>
      <link>http://yangchao.me/2013/10/horizon-plot</link>
      <pubDate>20 Oct 2013</pubDate>
      <author>Peter</author>
      <guid>http://yangchao.me/2013/10/horizon-plot</guid>
      <description>&lt;p&gt;对于Horizon Chart，可能大家还都比较陌生。
先来看一个比较经典的&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/horizon-intro/qSF60Mo.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;我们在日后的ggplot2的教程里会详细讲解这样一个Horizon Chart 是如何做出来的。&lt;/p&gt;

&lt;p&gt;但是大家应该和我差不多，第一次看到这个图的时候感觉是虽然看不太懂，但是觉得很绚丽。&lt;/p&gt;

&lt;p&gt;时髦的词叫作“不明觉厉”。&lt;/p&gt;

&lt;p&gt;想要做出一个漂亮的Horizon Chart 第一点就是要看懂它&lt;/p&gt;

&lt;p&gt;这个商业做Horizon Chart 的软件里，介绍了它的作图方法 ：&lt;/p&gt;

&lt;p&gt;原文在：&lt;a href=&quot;http://www.stonesc.com/Vis08_Workshop/DVD/Reijner_submission.pdf&quot;&gt;这里&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Horizon Chart主要应用在时间序列的数据里，尤其在金融，物流等等领域可以说应用非常广泛。&lt;/p&gt;

&lt;p&gt;原理比较简单：&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;1&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;首先有一个最传统的折线图&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/horizon-intro/ZexplPb.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;2&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;分别用不同的颜色标记正值和负值，同时在一个色调里用颜色深浅来表明绝对值的大小&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/horizon-intro/uL1yC0Q.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;3&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;取负值的镜像，都画在正向的坐标里。这样一来就可以省去不少空间。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/horizon-intro/p0O7zku.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;4&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/horizon-intro/SDsgxgQ.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;按照图层的不同，在几个不同的图层再次重叠到一起，这样可以再次节省不少空间。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;5&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/horizon-intro/6GoZEHS.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;当同时看不同类别时间序列的变化时，这种可视化的方法就显得非常有效。易懂信息量也够大。&lt;/p&gt;

&lt;p&gt;比如上图，可以轻松看到50种股票价格的变化趋势。&lt;/p&gt;

&lt;p&gt;关于Horizon Plot的具体实现方法，主要是ggplot2和LatticeExtra，&lt;/p&gt;

&lt;p&gt;在这篇博客中，我们会讲到horizon plot 的具体实现方法： &lt;a href=&quot;http://yangchao.me/2013/10/horizon-lattice-extra&quot;&gt;Go&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;相关文章：&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&quot;http://www.stonesc.com/Vis08_Workshop/DVD/Reijner_submission.pdf&quot;&gt;The Development of the Horizon Graph&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&quot;http://www.perceptualedge.com/articles/visual_business_intelligence/time_on_the_horizon.pdf&quot;&gt;Time on the Horizon&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&quot;http://vis.berkeley.edu/papers/horizon/2009-TimeSeries-CHI.pdf&quot;&gt;Sizing the Horizon: The Effects of Chart Size and Layering
on the Graphical Perception of Time Series Visualizations&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

</description>
    </item>
    
    <item>
      <title>ggplot2 - 为拟合曲线加置信空间</title>
      <link>http://yangchao.me/2013/09/Significance-ggplot2</link>
      <pubDate>24 Sep 2013</pubDate>
      <author>Peter</author>
      <guid>http://yangchao.me/2013/09/Significance-ggplot2</guid>
      <description>&lt;p&gt;如何在拟合曲线图中增加置信空间呢？&lt;/p&gt;

&lt;p&gt;答案很简单：&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;geom_ribbon()&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;r&quot;&gt;     library&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;gcookbook&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# For the data set&lt;/span&gt;
     &lt;span class=&quot;c1&quot;&gt;# Grab a subset of the climate data&lt;/span&gt;
     clim &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; subset&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;climate&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; Source &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;Berkeley&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; select&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;c&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;Year&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;Anomaly10y&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;Unc10y&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;这时数据是泽个样子滴:
其中Unc10y是置信空间，Anomaly10y是我们关注的变量&lt;/p&gt;

&lt;pre&gt;
Year   Anomaly10y Unc10y
1800     -0.435  0.505
1801     -0.453  0.493
1802     -0.460  0.486
...
2003      0.869  0.028
2004      0.884  0.029
&lt;/pre&gt;


&lt;p&gt;&lt;br&gt;&lt;/br&gt;&lt;/p&gt;

&lt;p&gt;下面就可以作图啦~带上我们的geom_ribbon&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;r&quot;&gt;    ggplot&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;clim&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; aes&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;x&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;Year&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; y&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;Anomaly10y&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;
      geom_ribbon&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;aes&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;ymin&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;Anomaly10y&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;Unc10y&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; ymax&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;Anomaly10y&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;Unc10y&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; alpha&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;0.2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;
      geom_line&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img src=&quot;/assets/images/ggplot2-significance/1g0JO13.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;当然了，我们可以把置信空间设置为曲线
代码如下：&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;r&quot;&gt;    &lt;span class=&quot;c1&quot;&gt;# With a dotted line for upper and lower bounds&lt;/span&gt;
    ggplot&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;clim&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; aes&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;x&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;Year&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; y&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;Anomaly10y&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;
      geom_line&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;aes&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;y&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;Anomaly10y&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;Unc10y&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; colour&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;grey50&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; linetype&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;dotted&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;
      geom_line&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;aes&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;y&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;Anomaly10y&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;Unc10y&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; colour&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;grey50&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; linetype&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;dotted&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;
      geom_line&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img src=&quot;/assets/images/ggplot2-significance/syubzvU.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;文中代码和图片下载在： &lt;a href=&quot;http://pan.baidu.com/s/1gRnnX&quot;&gt;这里&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

</description>
    </item>
    
    <item>
      <title>再次纪念MJ</title>
      <link>http://yangchao.me/2013/06/mj-memory</link>
      <pubDate>25 Jun 2013</pubDate>
      <author>Peter</author>
      <guid>http://yangchao.me/2013/06/mj-memory</guid>
      <description>&lt;p&gt;MJ去世第四年了，又翻出来了几首经典的歌听了一天。觉得特别想写点什么。&lt;/p&gt;

&lt;p&gt;还是先把经典的那个视频翻出来吧&lt;/p&gt;

&lt;p&gt;&lt;embed src=&quot;http://player.youku.com/player.php/sid/XMTQ3ODIzOTU2/v.swf&quot; allowFullScreen=&quot;true&quot; quality=&quot;high&quot; width=&quot;480&quot; height=&quot;400&quot; align=&quot;middle&quot; allowScriptAccess=&quot;always&quot; type=&quot;application/x-shockwave-flash&quot;&gt;&lt;/embed&gt;&lt;/p&gt;

&lt;p&gt;不得不说，优酷的广告简直太恶心了, 而且加载的很慢。&lt;/p&gt;

&lt;p&gt;就像麦当娜在2009MTV颁奖典礼上为MJ的致词一样，她重复最多的一句话莫过于“ He is a super star, but he’s also a human being.”是啊，“他是个超级巨星，但同时他也是个凡人。”这样一位多年来饱受媒体负面报道影响的巨星，可以在公众视线之外如此谦逊、温和、低调地为人处事，他的心里要承载多少对人间的爱。他最缺少的，其实就是关爱，但他付出最多的，恰恰也是关爱。We&#39;re the World. They don&#39;t Care About Us. Earth Song. Heal the World. 我列举的都还只是那些关于和平关于孩子关于爱的歌曲，那些听了让我们会心平气和会感到柔软的歌曲。&lt;/p&gt;

&lt;p&gt;Michael Jackson离开的几年来，我们亲眼目睹了他的离去带来的一切纷争和改变。死因谜团，是谋杀还是病逝；分给三个孩子的遗产，没有得到的人虎视眈眈；娈童的丑闻终于翻案，始作俑者饮弹自尽；漂白的谣言被澄清。。等等等等。令人悲哀的是，一世伟大改变音乐历史的他，在死后的今天，才得到这迟来的清白。无论他得到了什么解释，无论他得到了什么追誉，都已经不再存有真正的意义——他已经离开了，一如那撕破旧日诽谤的真实，唯有支持者和歌迷流泪的欣慰，他终于清白了，伟大的精神支柱。&lt;/p&gt;

&lt;p&gt;你刚看到了Michael在格莱美颁奖礼上面的他，多么可爱纯真。所有歌迷大喊“I love you” 他都会腼腆的微笑回应 “ I Love You too” 那是一种渗入人心的力量。但是正是这样的一个人，在被“皮肤漂白”“娈童”谣言控诉，他为自己的话人们不会听，他付出的关爱有人质疑动机。可以想象他的内心应该是多么挣扎多么痛苦。&lt;/p&gt;

&lt;p&gt;惊异于美国洛杉矶的追悼仪式，这时才能理解什么叫做精神支柱。70万人，把现场外围的街头塞得没有移动之地，本只能容纳一万人的追悼现场，没有门票的支持者流着眼泪乞求看他最后一眼。各种年龄层的群众，小孩，妈妈，老人，各种肤色的，各种国籍的歌迷，有人已经嚎啕大哭，有些神情严肃但已然崩溃。你能感受得到，什么才叫做不分国界、不分种族、不分性别、不分地位的爱。他把爱用音乐传播到世界的每个角落，救助数不尽的贫困儿童，而传讹者却抓住那似是而非的一瞬间，将它永远涂上黑色。&lt;/p&gt;

&lt;p&gt;当事者理当反省，而大众世人是否更要反省？十多年来，每每有人说起他的皮肤，他的鼻子，他的猥亵儿童案，人们都会突然抬高声调，素不相识的人也会一唱一和，脸上都一如既往地带着摒弃和厌恶，语气里充满了事无巨细的自信。这气氛总是统一而整齐的，多少年来不可动摇。也许我们并没有对他诋毁和诽谤，但在深层的心里，可否对这些人云亦云有过逐流和漠视？未必是对待Michael Jackson，他毕竟——毕竟离我们太过遥远，不管我们声称自己到底有多爱他。只是想一想自己对待身边的人与事，是否有过那些传讹者般恶劣的心态呢。对待身边的每一个人，都足够真诚吗？对待身边的每一件事，都可曾用客观的理智心态去看待么？如果不曾，那么，理当反省。就像他的歌 Man In The Mirror里面说的：If You Wanna Make The World A Better Place. Take A Look At Yourself, And Then Make A Change.&lt;/p&gt;

&lt;p&gt;这也是我自己反思最多的地方。我原来不喜欢MJ，而且在纪念MJ系列头一篇说到他只不过是饭后的谈资。这谈资其实也包含着不敬的调侃。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Never Judge Too Quickly.&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;是不是应该更加有爱的对待自己对待别人。这也是我为什么很感谢静静把我带入了Michael的世界，很早之前静静在我的寝室看有关MJ的视频，说到他真的是没有皮肤漂白，就是白癜风。我还调侃呢，“他干啥你又不知道。”但是静静很坚定的说“我相信”。这句话在当时就给了我很大的力量和震撼。当时我理解的角度是在这个现在大家都缺少信任的时候能有一个完全相信的偶像或者朋友是多么幸福的事情。&lt;/p&gt;

&lt;p&gt;可惜我没有听过他很多的歌曲，可惜我没有看过他很多的MV。&lt;/p&gt;

&lt;p&gt;在所有的谣言都不攻自破之后，又多了一帮狂粉他的歌迷。我算是其中的狂热度稍低的一位。并不是追赶潮流或者标榜自己品味。&lt;/p&gt;

&lt;p&gt;现在的我看人更加平和，而多去发现美。不轻易去啐人一口，更多相信美好，对这个世界也对自己的内心。&lt;/p&gt;

&lt;p&gt;这么一个独特的日子，没有人冠以它堂皇的意义，而在喜欢他的人心里，却泛滥着难以忘却的思念。他永远不会再回来了。看着[Heal The World]的MV，想到他一生投身慈善事业，获得无数人道主义奖、诺贝尔和平主义奖提名，也正是因为他如此传播爱，才使得他除了闪耀绝伦的音乐成就之外，还有着无数人心灵寄托的伟岸像形。他开创了一个音乐的历史，还把爱带到每一个他能去到的地方。&lt;/p&gt;

&lt;p&gt;最后向真正默默喜欢和支持MJ的静静粉丝表示致敬，这种默默的支持和相信是一种力量，鼓舞了我也去相信点什么。&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Plyr- 多因子整合</title>
      <link>http://yangchao.me/2013/06/plyr-advanced</link>
      <pubDate>18 Jun 2013</pubDate>
      <author>Peter</author>
      <guid>http://yangchao.me/2013/06/plyr-advanced</guid>
      <description>&lt;p&gt;在上次我们看到的例子，Iris数据集中只有Species一个是因子 （factor），其实plyr更加适合于在多因子的数据集中进行操作&lt;/p&gt;

&lt;p&gt;今天我们用一个稍微复杂一点的数据集来详细讲解&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/hadley/data-baby-names/blob/master/baby-names.csv&quot;&gt;babynames&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;原数据大约2万5千行，包括四个字段year，name，pecent，sex。其中year是从1880到2008&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;r&quot;&gt;    
    options&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;stringsAsFactors &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;FALSE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    babyname &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; read.csv&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;bnames.csv&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    head&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;babyname&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;数据就是这个样子的&lt;/p&gt;

&lt;pre&gt;
  year    name      percent     sex
1 1880    John      0.081541    boy
2 1880 William      0.080511    boy
3 1880   James      0.050057    boy
4 1880 Charles      0.045167    boy
5 1880  George      0.043292    boy
6 1880   Frank      0.027380    boy
&lt;/pre&gt;


&lt;p&gt;&lt;br&gt;&lt;/br&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;问题1&lt;/strong&gt;： 找到每一年，每种性别中最受欢迎的名字&lt;/p&gt;

&lt;p&gt;还是按照我们的SAC思想&lt;/p&gt;

&lt;p&gt;S：把原数据按照sex和year两个因子进行切片&lt;/p&gt;

&lt;p&gt;A：每个切片中得到最受欢迎的名字&lt;/p&gt;

&lt;p&gt;C：把结果整合&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;r&quot;&gt;    
    ddply&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;babyname&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; .&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;year&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; sex&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;?????&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;前两部份我们都已经很熟悉了，原数据切片。但是后面得到最受欢迎的名字应该怎么办？&lt;/p&gt;

&lt;p&gt;我们要自定义一个函数，来求出最受欢迎的人名，然后再把它加到ddply中的function里面&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;r&quot;&gt;    
    mostPopular &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;kr&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;x&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    x&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;name&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;which.max&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;x&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;percent&lt;span class=&quot;p&quot;&gt;)]&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    ddply&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;babyname&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; .&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;year&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; sex&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; mostPopular&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;结果一下就出来了（截取）&lt;/p&gt;

&lt;pre&gt;
   year  sex       V1
1   1880  boy     John
2   1880 girl     Mary
3   1881  boy     John
4   1881 girl     Mary
5   1882  boy     John
6   1882 girl     Mary
7   1883  boy     John
8   1883 girl     Mary
9   1884  boy     John
10  1884 girl     Mary
11  1885  boy     John
12  1885 girl     Mary
13  1886  boy     John
14  1886 girl     Mary
15  1887  boy     John
16  1887 girl     Mary
17  1888  boy     John
18  1888 girl     Mary
19  1889  boy     John
20  1889 girl     Mary
&lt;/pre&gt;


&lt;p&gt;&lt;br&gt;&lt;/br&gt;&lt;/p&gt;

&lt;p&gt;可以看出，1889年，都是男的叫John最多，女的叫Mary最多。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;问题2&lt;/strong&gt;：每一年，每种性别中 （ 作者注： 这就是告诉你怎么切片呢 ）， 名字的首字母所占比例是多少？&lt;/p&gt;

&lt;p&gt;解释下问题： Get the total percentage of the first character of the baby names by year and gender&lt;/p&gt;

&lt;p&gt;就比如2000年一共15个男孩出生，5个叫杨超，5个叫贾超，5个叫牛超&lt;/p&gt;

&lt;p&gt;那Y（Yang）的首字母占比是 1/3
同理 J （Jia ） 和 N （Niu ）也是 1/3&lt;/p&gt;

&lt;p&gt;还是SAC思想&lt;/p&gt;

&lt;p&gt;S： 按照性别、年份选出进行切片。
&lt;strong&gt;注意！&lt;/strong&gt; 这里不仅仅是要对这两个变量进行切片，还有自定义一个新的变量 &lt;code&gt;姓名的首字母&lt;/code&gt;！&lt;/p&gt;

&lt;p&gt;请在反思上面的简单引例。&lt;/p&gt;

&lt;p&gt;A： 对同样的首字母百分比进行加和&lt;/p&gt;

&lt;p&gt;C： 数据整合&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;r&quot;&gt;    
    &lt;span class=&quot;c1&quot;&gt;#首先提取名字的首字母&lt;/span&gt;
    firstletter &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;kr&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;x&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    tolower&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;substr&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;x&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# 根据ddply可以得出结果&lt;/span&gt;
    letterFreq &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; ddply&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;babyname&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; .&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;year&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; sex&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; first&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;firstletter&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;name&lt;span class=&quot;p&quot;&gt;)),&lt;/span&gt; summarize&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; sumPer &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; sum&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;percent&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;最后的结果就是这样的&lt;/p&gt;

&lt;pre&gt;
  year sex  first   sumPer
1 1880 boy     a    0.062543
2 1880 boy     b    0.017858
3 1880 boy     c    0.084047
4 1880 boy     d    0.021010
5 1880 boy     e    0.058219
6 1880 boy     f    0.055142
&lt;/pre&gt;


&lt;p&gt;&lt;br&gt;&lt;/br&gt;
最后我们可以可视化一下，用到ggplot2&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;r&quot;&gt;    
    require&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;ggplot2&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    ggplot&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;letterFreq&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; aes&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;x&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;year&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; y&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;sumPer&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; group&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;sex&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; geom_line&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;aes&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;color&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;sex&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; facet_wrap&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;~&lt;/span&gt; first&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; nrow&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img src=&quot;/assets/images/plyr-advanced/eQloL6A.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;在Hadley的官网上，有不少这样的例子，大家一定要多去看看，多感受就更有感觉了。&lt;/p&gt;

&lt;p&gt;原文的数据，代码，最后的图在&lt;a href=&quot;http://pan.baidu.com/s/19r800&quot;&gt;这里&lt;/a&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>ggplot2 - Stacked Area Graph</title>
      <link>http://yangchao.me/2013/05/stack-area-ggplot2</link>
      <pubDate>31 May 2013</pubDate>
      <author>Peter</author>
      <guid>http://yangchao.me/2013/05/stack-area-ggplot2</guid>
      <description>&lt;p&gt;这一节重点介绍ggplot2中，关于堆积图的制作方法。
提纲挈领记住最重要的！&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Geom_area()&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;接下来的步骤大家可以想到了吧。
在拎清这个主题之后，我们就会慢慢来对图形进行微调即可&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Base Plot&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;r&quot;&gt;    library&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;gcookbook&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; 
    library&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;ggplot2&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# For the data set&lt;/span&gt;
    ggplot&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;uspopage&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; aes&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;x&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;Year&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; y&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;Thousands&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; fill&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;AgeGroup&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; geom_area&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img src=&quot;/assets/images/ggplot2-stack/ZAghMVD.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;延伸问题1&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;我们发现了图型和图例中的颜色顺序是相反的。这样很难看。有两种解决方案&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;改图例：通过改变Scale中的breaks值&lt;/li&gt;
&lt;/ol&gt;


&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;r&quot;&gt;    ggplot&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;uspopage&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; aes&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;x&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;Year&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; y&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;Thousands&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; fill&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;AgeGroup&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;
      geom_area&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;colour&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;black&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; size&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;.2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; alpha&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;.4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;
      scale_fill_brewer&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;palette&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;Blues&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; breaks&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;rev&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;levels&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;uspopage&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;AgeGroup&lt;span class=&quot;p&quot;&gt;)))&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;#rev 表示将图例倒转&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img src=&quot;/assets/images/ggplot2-stack/G1umci8.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;改数据：引用Plyr中desc函数&lt;/li&gt;
&lt;/ol&gt;


&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;r&quot;&gt;    library&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;plyr&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# For the desc() function&lt;/span&gt;
    ggplot&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;uspopage&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; aes&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;x&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;Year&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; y&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;Thousands&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; fill&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;AgeGroup&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; order&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;desc&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;AgeGroup&lt;span class=&quot;p&quot;&gt;)))&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;
      geom_area&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;colour&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;black&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; size&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;.2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; alpha&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;.4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;
      scale_fill_brewer&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;palette&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;Blues&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img src=&quot;/assets/images/ggplot2-stack/xS9aP30.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;延伸问题2&lt;/strong&gt;
我们发现上边的图两侧也有黑色框线，不美观，如何设置去掉这些黑色框线？&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Geom_area 中的颜色设为NA&lt;/li&gt;
&lt;li&gt;使用 &lt;strong&gt;Geom_line&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;r&quot;&gt;    ggplot&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;uspopage&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; aes&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;x&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;Year&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; y&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;Thousands&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; fill&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;AgeGroup&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; order&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;desc&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;AgeGroup&lt;span class=&quot;p&quot;&gt;)))&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;
      geom_area&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;colour&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;NA&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; alpha&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;.4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;
      scale_fill_brewer&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;palette&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;Blues&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;
      geom_line&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;position&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;stack&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; size&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;.2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img src=&quot;/assets/images/ggplot2-stack/JUEp6T8.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;延伸问题3&lt;/strong&gt;
如果想制作成比例的堆积图，应该怎么办？&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;只需要在Plyr拓展包稍微改变下数据即可，和成比例柱形图的道理完全一样&lt;/li&gt;
&lt;/ul&gt;


&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;r&quot;&gt;    library&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;gcookbook&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# For the data set&lt;/span&gt;
    library&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;plyr&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;# For the ddply() function&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# Convert Thousands to Percent&lt;/span&gt;
    uspopage_prop &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;ddply&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;uspopage&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;Year&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;transform&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; Percent &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;Thousands &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;sum&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;Thousands&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# 在uspopage数据中，把Year中对应的Thousands值除以同一个Year中所有Thousands的总和。&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;下面的做法就和之间的完全一样了&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;r&quot;&gt;    ggplot&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;uspopage_prop&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; aes&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;x&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;Year&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; y&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;Percent&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; fill&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;AgeGroup&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;
      geom_area&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;colour&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;black&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; size&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;.2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; alpha&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;.4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;
      scale_fill_brewer&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;palette&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;Blues&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; breaks&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;rev&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;levels&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;uspopage&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;AgeGroup&lt;span class=&quot;p&quot;&gt;)))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img src=&quot;/assets/images/ggplot2-stack/dSxIwAu.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;文中代码和图片下载在： &lt;a href=&quot;http://pan.baidu.com/s/1nCMPq&quot;&gt;这里&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

</description>
    </item>
    
    <item>
      <title>Sublime Text 2学习过程</title>
      <link>http://yangchao.me/2013/05/Sublime-text-2</link>
      <pubDate>23 May 2013</pubDate>
      <author>Peter</author>
      <guid>http://yangchao.me/2013/05/Sublime-text-2</guid>
      <description>&lt;p&gt;在金炎的大力推荐和成果展示炫耀下，今天准备开始配置一下ST2。
Sbulime Text是一个跨平台的文本编辑器。收费，但是可以无限期免费试用，提醒交费的频率也非常低。
我使用的是Ubuntu12.04系统。
安装过程详见&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://www.technoreply.com/how-to-install-sublime-text-2-on-ubuntu-12-04-unity/&quot;&gt;1&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;安装好，通常第二个就安装插件package control&lt;/p&gt;

&lt;p&gt;这个插件的官方网址是&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://wbond.net/sublime_packages/package_control&quot;&gt;2&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;可以自动输入代码安装。
可能是因为学校网关的限制，通过命令行安装失败。所以我选择了用手动安装。
安装过程大致如下&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;先下载，然后解压缩&lt;/li&gt;
&lt;li&gt;在sublime中Preferences找到installed packages所在的文件夹。&lt;/li&gt;
&lt;li&gt;拷贝进去即可。
但是不知到为什么我这里也反复出现几个问题，都是有关权限的。&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;&lt;a href=&quot;http://ruby-china.org/topics/7144&quot;&gt;3&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;RubyChina提到了一个权限的问题&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://stackoverflow.com/questions/12284166/cant-install-package-control-in-sublime-text-2&quot;&gt;4&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;stackflow 也提到了一个解决方案。反正就是在跌跌撞撞中装好了Packages Control&lt;/p&gt;

&lt;p&gt;找到的几个比较好的网上教程&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://net.tutsplus.com/tutorials/tools-and-tips/sublime-text-2-tips-and-tricks/&quot;&gt;5&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;这个是基于Mac来写的。安装好package control之后我装了一个allignment，用来对齐等号的。但是因为快捷键冲突失败了。&lt;/p&gt;

&lt;p&gt;下面就是把ST设置成为VIM格式&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://www.sublimetext.com/docs/2/vintage.html&quot;&gt;6&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;因为太多的热键冲突。。我感觉已经很崩溃了。&lt;/p&gt;

&lt;p&gt;但是不得不说，这个风骚的小GUI确实看上去舒服极了， 让人写代码的心情一下就舒畅了起来。 或者说就起码没有那么憋屈啦。 网上有不同插件和不同的主题图案，现在我用的比较少。主要是一些基本功能， 支持vim格式等等。像前端人用的那些现在基本用的比较少呢。&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>